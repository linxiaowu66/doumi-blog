{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/autowired.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/component.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/constant.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/optional.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/annotation/value.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/aop/aop-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/aop/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/aop/method-advice.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/application/application-error.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/application/application-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/application/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/config/config-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/config/config-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/config/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/container/auto-bind.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/container/container-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/container/dynamic-container.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/container/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/error/cutom-error.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/error/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/error/validation-errors.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/logger/console-logger.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/logger/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/logger/logger-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/pipe/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/pipe/pipe-manager.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/pipe/pipe-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/pipe/pipe-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/pipe/pipe-transtorm.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/class-util.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/disposable.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/metadata-util.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/os.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/prioritizeable.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/promise-util.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/common/utils/proxy-util.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/node/application/backend-application-state.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/node/application/backend-application.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/node/application/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/core/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/express-adapter/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/common/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/common/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/body.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/catch.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/controller.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/cookie.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/header.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/method.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/param.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/query.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/session.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/annotation/view.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/handler-adapter.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/handler-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/route-builder.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/route-metadata-matcher.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/handler/route-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/method-args-resolver-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/method-args-resolver.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/resolver-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/response-resolver-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/response-resolver.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/view-resolver-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/resolver/view-resolver.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/view/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/view/json-view.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/view/text-view.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/view/view-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/mvc/src/node/view/view-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/react/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/annotation/autorpc.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/annotation/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/annotation/rpc.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/channel-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/connection-factory.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/handler.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/http-channel.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/proxy-factory.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/reader.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/common/jsonrpc/writer.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/channel/channel-manager.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/channel/channel-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/channel/channel-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/channel/channel-strategy.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/channel/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/handler/handler-adapter.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/handler/handler-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/handler/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/rpc/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/access-decision-manager.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/access-decision-voter.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/access-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/method-advice.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/policy-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/policy-resolver.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/access/security-metadata-source.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/anonymous.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/authenticated.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/authorize.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/post-authorize.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/annotation/pre-authorize.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/authentication/authentication-manager.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/authentication/authentication-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/authentication/authentication-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/authentication/authentication-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/authentication/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/context/context-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/context/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/context/security-context-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/context/security-context-store.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/context/security-context-strategy.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/crypto/crypto-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/crypto/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/crypto/password-encoder.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/error/error-hander.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/error/error-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/error/error.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/error/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/logout-handler.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/logout-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/logout-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/logout-success-handler-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/logout/logout-success-handler.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/user/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/user/user-checker.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/user/user-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/security/src/node/user/user-store.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/common/application-lifecycle.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/common/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/common/entity-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/common/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/annotation/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/annotation/transactional.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/context/context-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/context/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/typeorm/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/common/constants.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/common/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/common/resolver/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/common/resolver/path-resolver.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/common/resolver/resolver-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/application/dev-application-entry.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/context.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cookies/cookies-factory.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cookies/cookies-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cookies/cookies-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cookies/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cors/cors-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cors/cors-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/cors/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/dispatcher/dispatcher-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/dispatcher/dispatcher.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/dispatcher/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/error/error-hander-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/error/error-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/error/http-error.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/error/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/handler/handler-execution-chain.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/handler/handler-mapping.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/handler/handler-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/handler/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/http/http-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/http/http-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/http/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/matcher/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/matcher/matcher-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/matcher/request-matcher.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/middleware/compose.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/middleware/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/middleware/middleware-provider.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/index.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session-manager.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session-middleware.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session-protocol.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session-store.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session-strategy.ts","/Users/linxiaowu/Github/doumi-blog/node_modules/@malagu/web/src/node/session/session.ts","/Users/linxiaowu/Github/doumi-blog/src/common/blog-protocol.ts","/Users/linxiaowu/Github/doumi-blog/src/node/auth.provider.ts","/Users/linxiaowu/Github/doumi-blog/src/node/blog-server.ts","/Users/linxiaowu/Github/doumi-blog/src/node/blog.admin.controller.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/archive.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/article.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/category.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/index.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/reader.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/tag.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/user.ts","/Users/linxiaowu/Github/doumi-blog/src/node/entity/website.ts","/Users/linxiaowu/Github/doumi-blog/src/node/module.ts","/Users/linxiaowu/Github/doumi-blog/src/node/schedule.ts","/Users/linxiaowu/Github/doumi-blog/src/node/services/auth.service.ts","/Users/linxiaowu/Github/doumi-blog/src/node/services/blog.service.ts","/Users/linxiaowu/Github/doumi-blog/src/node/services/index.ts","/Users/linxiaowu/Github/doumi-blog/src/node/services/website.service.ts","/Users/linxiaowu/Github/doumi-blog/src/node/user.store.ts","external \"awesome-js\"","external \"class-transformer\"","external \"class-validator\"","external \"cookies\"","external \"cors\"","external \"crc\"","external \"cron\"","external \"crypto-js\"","external \"express-http-context\"","external \"inversify\"","external \"inversify-binding-decorators\"","external \"jexl\"","external \"lodash.pick\"","external \"loglevel\"","external \"reflect-metadata\"","external \"source-map-support\"","external \"ts-custom-error\"","external \"typeorm\"","external \"url-join\"","external \"url-pattern\"","external \"util\"","external \"uuid/v4\"","external \"vscode-jsonrpc\"","external \"vscode-jsonrpc/lib/events\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./node_modules/@malagu/web/lib/node/application/dev-application-entry.js\");\n","import { inject, interfaces, multiInject, Container } from 'inversify';\nimport { ServiceIdentifierOrFunc } from 'inversify/dts/annotation/inject';\nimport { ContainerProvider } from '../container';\n\nexport interface AutowiredOption {\n    id?: ServiceIdentifierOrFunc,\n    detached?: boolean\n}\nexport namespace AutowiredOption {\n    export function is(options: any): options is AutowiredOption {\n        return options && (options.id !== undefined || options.detached !== undefined);\n    }\n}\n\nexport interface AutowiredDecorator {\n    (option?: ServiceIdentifierOrFunc | AutowiredOption): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Autowired = <AutowiredDecorator>function (target: any, targetKey: string, index?: number) {\n    const option = getAutowiredOption(target, targetKey, index);\n    if (targetKey === undefined && index === undefined) {\n        return (t: any, tk: string, i?: number) => {\n            applyAutowiredDecorator(option, t, tk, i);\n        };\n\n    } else {\n        applyAutowiredDecorator(option, target, targetKey, index);\n    }\n};\n\nexport function getAutowiredOption(target: any, targetKey: string, index?: number) {\n    let option: AutowiredOption = {};\n    if (targetKey === undefined) {\n        if (AutowiredOption.is(target)) {\n            option = { ...target };\n        } else if (target) {\n            option = { id: target };\n        }\n    }\n    return option;\n}\n\nexport function applyAutowiredDecorator(option: AutowiredOption, target: any, targetKey: string, index?: number,\n    doInject = (id: ServiceIdentifierOrFunc, isMulti: boolean, t: any, k: string, i?: number) => {\n        if (isMulti) {\n            multiInject(<interfaces.ServiceIdentifier<any>>id)(t, k, i);\n        } else {\n            inject(id)(target, targetKey, index);\n        }\n    },\n    doGetValue = (id: interfaces.ServiceIdentifier<any>, isMulti: boolean, container: Container, t: any, property: string) => {\n        if (isMulti) {\n            return container.getAll(id);\n        } else {\n            return container.get(id);\n        }\n    }): void {\n    let type: any;\n    if (index !== undefined)  {\n        type = Reflect.getMetadata('design:paramtypes', target, targetKey)[index];\n\n    } else {\n        type = Reflect.getMetadata('design:type', target, targetKey);\n    }\n    const isMlt = type === Array;\n    const defaultAutowiredOption: AutowiredOption = {\n        id: type,\n        detached: false\n    };\n\n    const opt = { ...defaultAutowiredOption, ...option };\n\n    if (opt.detached) {\n        if (index !== undefined) {\n            throw new Error(`The ${target.constructor.name} itself is not injected into the container, so the parameter injection of the constructor is not supported.`);\n        }\n        createAutowiredProperty(opt, isMlt, doGetValue, target, targetKey);\n        return;\n    } else {\n        doInject( <ServiceIdentifierOrFunc>opt.id, isMlt, target, targetKey, index);\n\n    }\n}\n\nexport function createAutowiredProperty(option: AutowiredOption, isMulti: boolean,\n    doGetValue: (id: interfaces.ServiceIdentifier<any>, isMulti: boolean, container: Container, target: any, property: string) => any,\n    target: any, property: string) {\n    let value: any;\n    Object.defineProperty(target, property, {\n        enumerable: true,\n        get() {\n            if (value !== undefined) {\n                return value;\n            }\n            const container = ContainerProvider.provide();\n            const id = <interfaces.ServiceIdentifier<any>>option.id;\n            value = doGetValue(id, isMulti, container, target, property);\n\n            return value;\n        }\n    });\n}\n","import { fluentProvide } from 'inversify-binding-decorators';\nimport { interfaces } from 'inversify';\nimport { METADATA_KEY } from '../constants';\nimport { MethodBeforeAdvice, AfterReturningAdvice, AfterThrowsAdvice } from '../aop/aop-protocol';\n\nexport enum Scope {\n    Request, Singleton, Transient\n}\nexport interface ComponentOption {\n    id?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[];\n    scope?: Scope;\n    rebind?: boolean;\n    proxy?: boolean;\n}\nexport namespace ComponentOption {\n    export function is(options: any): options is ComponentOption {\n        return options && (options.id !== undefined || options.scope !== undefined ||\n            options.rebind !== undefined || options.proxy !== undefined);\n    }\n}\n\nexport interface ComponentDecorator {\n    (option?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption): (target: any) => any;\n}\n\nexport const Component =\n    <ComponentDecorator>function (idOrOption?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption): (target: any) => any {\n    const option = getComponentOption(idOrOption);\n    return (t: any) => {\n        applyComponentDecorator(option, t);\n    };\n};\n\nexport function getComponentOption(idOrOption?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption) {\n    let option: ComponentOption = {};\n\n    if (ComponentOption.is(idOrOption)) {\n        option = { ...idOrOption };\n    } else if (idOrOption) {\n        option = { id: idOrOption };\n    }\n    return option;\n}\n\nfunction doProxy (context: interfaces.Context, t: any) {\n    const proxy = new Proxy(t, {\n        get: (target, method, receiver) => {\n            const func = target[method];\n            if (typeof func === 'function') {\n                return async (...args: any[]) => {\n                    try {\n                        const beforeAdvices = context.container.getAll<MethodBeforeAdvice>(MethodBeforeAdvice) || [];\n                        for (const advice of beforeAdvices) {\n                            await advice.before(method, args, t);\n                        }\n                        const returnValue = await func.apply(target, args);\n                        const afterReturningAdvices = context.container.getAll<AfterReturningAdvice>(AfterReturningAdvice) || [];\n                        for (const advice of afterReturningAdvices) {\n                            await advice.afterReturning(returnValue, method, args, t);\n                        }\n                        return returnValue;\n                    } catch (error) {\n                        const afterThrowsAdvices = context.container.getAll<AfterThrowsAdvice>(AfterThrowsAdvice) || [];\n                        for (const advice of afterThrowsAdvices) {\n                            await advice.afterThrows(error, method, args, t);\n                        }\n                        throw error;\n                    }\n                };\n            }\n            return func;\n         }\n    });\n    proxy.target = t;\n    t.proxyTarget = proxy;\n    return proxy;\n}\n\nexport function applyComponentDecorator(option: ComponentOption, target: any): void {\n    const defaultComponentOption: ComponentOption = {\n        id: target,\n        scope: Scope.Singleton,\n        rebind: false,\n        proxy: false\n    };\n    const opt = { ...defaultComponentOption, ...option };\n    const ids = Array.isArray(opt.id) ? opt.id : opt.id !== target ? [ opt.id, target ] : [ opt.id ] ;\n    const id = <interfaces.ServiceIdentifier<any>>ids[0];\n    const p = fluentProvide(id);\n    let whenOn: any;\n    if (opt.scope === Scope.Singleton) {\n        whenOn = p.inSingletonScope();\n    } else if (opt.scope === Scope.Transient) {\n        whenOn = p.inTransientScope();\n    }\n    if (opt.proxy) {\n        whenOn.onActivation(doProxy).done(true)(target);\n    } else {\n        whenOn.done(true)(target);\n    }\n    ids.shift();\n    if (ids.length > 0) {\n        (Reflect as any).defineMetadata(\n            METADATA_KEY.toService,\n            id,\n            target\n        );\n    }\n    for (const sevice of ids) {\n        fluentProvide(<interfaces.ServiceIdentifier<any>>sevice).done(true)(target);\n    }\n    if (opt.rebind) {\n        const metadata = true;\n        Reflect.defineMetadata(\n            METADATA_KEY.rebind,\n            metadata,\n            target\n        );\n    }\n}\n","import { interfaces } from 'inversify';\nimport { METADATA_KEY } from '../constants';\n\nexport interface ConstantOption {\n    id?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[];\n    rebind?: boolean;\n    constantValue?: boolean;\n}\n\nexport interface ConstantDecorator {\n    (id: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[], constantValue: any, rebind?: boolean): (target: any) => any;\n}\n\nexport const Constant =\n    <ConstantDecorator>function (id: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[], constantValue: any, rebind: boolean = false): (target: any) => any {\n    return (t: any) => {\n        applyConstantDecorator({ id, constantValue, rebind }, t);\n    };\n};\n\nexport function applyConstantDecorator(option: ConstantOption, target: any): void {\n    const previousMetadata = Reflect.getMetadata(METADATA_KEY.constantValue, Reflect) || [];\n    const newMetadata = [option].concat(previousMetadata);\n    Reflect.defineMetadata(METADATA_KEY.constantValue, newMetadata, Reflect);\n}\n","export * from './autowired';\nexport * from './component';\nexport * from './value';\nexport * from './optional';\nexport * from './constant';\n","import { optional } from 'inversify';\n\nexport interface OptionalDecorator {\n    (): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Optional = <OptionalDecorator>function (target: any, targetKey: string, index?: number) {\n    if (target === undefined) {\n        return optional();\n    } else {\n        optional()(target, targetKey, index);\n    }\n};\n","import { inject, named } from 'inversify';\nimport { ContainerProvider } from '../container';\n\nexport const VALUE = Symbol('Value');\n\nexport interface ValueOption {\n    el?: string,\n    detached?: boolean\n}\nexport namespace ValueOption {\n    export function is(option: any): option is ValueOption {\n        return option && (option.el !== undefined || option.detached !== undefined);\n    }\n}\n\nexport interface ValueDecorator {\n    (elOrValueOption?: string | ValueOption): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Value = <ValueDecorator>function (target: any, targetKey: string, index?: number) {\n    const option = getValueOption(target, targetKey, index);\n    if (targetKey === undefined && index === undefined) {\n        return (t: any, tk: string, i?: number) => {\n            applyValueDecorator(option, t, tk, i);\n        };\n\n    } else {\n        applyValueDecorator(option, target, targetKey, index);\n    }\n};\n\nexport function getValueOption(target: any, targetKey: string, index?: number) {\n    let option: ValueOption = {};\n    if (targetKey === undefined) {\n        if (ValueOption.is(target)) {\n            option = { ...target };\n        } else if (target) {\n            option = { el: target };\n        }\n    }\n    return option;\n}\n\nexport function applyValueDecorator(option: ValueOption, target: any, targetKey: string, index?: number): void {\n    const defaultAutowiredOption: ValueOption = {\n        el: targetKey,\n        detached: false\n    };\n    const opt = { ...defaultAutowiredOption, ...option };\n    if (opt.detached) {\n        if (index !== undefined) {\n            throw new Error(`The ${target.constructor.name} itself is not injected into the container, so the parameter injection of the constructor is not supported.`);\n        }\n        createValueProperty(opt, target, targetKey);\n        return;\n    }\n\n    const el = <string>opt.el;\n    inject(VALUE)(target, targetKey, index);\n    named(el)(target, targetKey, index);\n}\n\nexport function createValueProperty(option: ValueOption, target: any, property: string) {\n    Object.defineProperty(target, property, {\n        enumerable: true,\n        get() {\n            const container = ContainerProvider.provide();\n            const el = <string>option.el;\n            return container.getNamed(VALUE, el);\n        }\n    });\n}\n","export const  MethodBeforeAdvice = Symbol('MethodBeforeAdvice');\nexport const  AfterReturningAdvice = Symbol('AfterReturningAdvice');\nexport const  AfterThrowsAdvice = Symbol('AfterThrowsAdvice');\n\nexport interface Advice { }\n\nexport interface BeforeAdvice extends Advice { }\n\nexport interface AfterAdvice extends Advice { }\n\nexport interface MethodBeforeAdvice extends BeforeAdvice {\n\n    before(method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n\nexport interface AfterReturningAdvice extends AfterAdvice {\n\n    afterReturning(returnValue: any, method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n\nexport interface AfterThrowsAdvice extends AfterAdvice {\n\n    afterThrows(error: any, method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n","export * from './aop-protocol';\nexport * from './method-advice';\n","import { Component } from '../annotation';\nimport { MethodBeforeAdvice, AfterReturningAdvice, AfterThrowsAdvice } from './aop-protocol';\n\n@Component(MethodBeforeAdvice)\nexport class NoOpMethodBeforeAdivice implements MethodBeforeAdvice {\n\n    async before(method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n\n@Component(AfterReturningAdvice)\nexport class NoOpAfterReturningAdvice implements AfterReturningAdvice {\n\n    async afterReturning(returnValue: any, method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n\n@Component(AfterThrowsAdvice)\nexport class NoOpAfterThrowsAdvice implements AfterThrowsAdvice {\n\n    async afterThrows(error: any, method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n","export interface ApplicationError<C extends number, D> extends Error {\n    readonly code: C\n    readonly data: D\n    toJson(): ApplicationError.Literal<D>\n}\nexport namespace ApplicationError {\n    export interface Literal<D> {\n        message: string\n        data: D\n        stack?: string\n    }\n    export interface Constructor<C extends number, D> {\n        (...args: any[]): ApplicationError<C, D>;\n        code: C;\n        is(arg: object | undefined): arg is ApplicationError<C, D>\n    }\n    const codes: number[] = [];\n    export function declare<C extends number, D>(code: C, factory: (...args: any[]) => Literal<D>): Constructor<C, D> {\n        if (codes.indexOf(code) !== -1) {\n            throw new Error(`An application error for '${code}' code is already declared`);\n        }\n        const constructorOpt = Object.assign((...args: any[]) => new Impl(code, factory(...args), constructorOpt), {\n            code,\n            is(arg: object | undefined): arg is ApplicationError<C, D> {\n                return arg instanceof Impl && arg.code === code;\n            }\n        });\n        return constructorOpt;\n    }\n    export function is<C extends number, D>(arg: object | undefined): arg is ApplicationError<C, D> {\n        return arg instanceof Impl;\n    }\n    export function fromJson<C extends number, D>(code: C, raw: Literal<D>): ApplicationError<C, D> {\n        return new Impl(code, raw);\n    }\n    class Impl<C extends number, D> extends Error implements ApplicationError<C, D>  {\n        readonly data: D;\n        constructor(\n            readonly code: C,\n            raw: ApplicationError.Literal<D>,\n            constructorOpt?: Function\n        ) {\n            super(raw.message);\n            this.data = raw.data;\n            Object.setPrototypeOf(this, Impl.prototype);\n            if (raw.stack) {\n                this.stack = raw.stack;\n            } else if (Error.captureStackTrace && constructorOpt) {\n                Error.captureStackTrace(this, constructorOpt);\n            }\n        }\n        toJson(): ApplicationError.Literal<D> {\n            const { message, data, stack } = this;\n            return { message, data, stack };\n        }\n    }\n}\n","import { MaybePromise } from '../utils/prioritizeable';\nimport { Deferred } from '../utils/promise-util';\nimport { injectable } from 'inversify';\nimport { Logger } from '../logger';\nimport { Autowired, Component } from '../annotation';\nimport { Emitter, Event } from 'vscode-jsonrpc';\n\nexport const ApplicationLifecycle = Symbol('ApplicationLifecycle');\nexport const Application = Symbol('Application');\nexport const ApplicationStateService = Symbol('ApplicationStateService');\n\nexport interface ApplicationLifecycle<T extends Application> {\n\n    initialize?(): void;\n\n    onStart?(app: T): MaybePromise<void>;\n\n    onStop?(app: T): void;\n\n}\n\nexport interface Application {\n\n    start(): Promise<void>;\n\n}\n\n@Component(ApplicationLifecycle)\nexport class EmptyApplicationLifecycle implements ApplicationLifecycle<Application> {\n\n    initialize() {\n        // NOOP\n    }\n\n}\n\n@injectable()\nexport abstract class AbstractApplication implements Application {\n\n    @Autowired(ApplicationLifecycle)\n    protected readonly lifecycles: ApplicationLifecycle<Application>[];\n\n    @Autowired(Logger)\n    protected readonly logger: Logger;\n\n    abstract start(): Promise<void>;\n\n    /**\n     * Initialize and start the frontend application.\n     */\n    protected async doStart(): Promise<void> {\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.initialize) {\n                try {\n                    lifecycle.initialize();\n                } catch (error) {\n                    this.logger.error('Could not initialize lifecycle', error);\n                }\n            }\n        }\n\n       // TODO\n\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.onStart) {\n                try {\n                    await lifecycle.onStart(this);\n                } catch (error) {\n                    this.logger.error('Could not start lifecycle', error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Stop the frontend application lifecycle.\n     */\n    protected doStop(): void {\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.onStop) {\n                try {\n                    lifecycle.onStop(this);\n                } catch (error) {\n                    this.logger.error('Could not stop lifecycle', error);\n                }\n            }\n        }\n    }\n\n}\n\nexport type ApplicationState =\n    'init'\n    | 'started'\n    | 'ready';\n\nexport interface ApplicationStateService<T extends string> {\n    state: T;\n    readonly onStateChanged: Event<T>\n\n    reachedState(state: T): Promise<void>;\n\n    reachedAnyState(...states: T[]): Promise<void>;\n\n}\n@injectable()\nexport abstract class AbstractApplicationStateService<T extends string> implements ApplicationStateService<T> {\n\n    private _state = <T>'init';\n\n    protected deferred: { [state: string]: Deferred<void> } = {};\n    protected readonly stateChanged = new Emitter<T>();\n\n    get state(): T {\n        return this._state;\n    }\n\n    set state(state: T) {\n        if (state !== this._state) {\n            this.deferred[this._state] = new Deferred();\n            this._state = state;\n            if (this.deferred[state] === undefined) {\n                this.deferred[state] = new Deferred();\n            }\n            this.deferred[state].resolve();\n            this.stateChanged.fire(state);\n        }\n    }\n\n    get onStateChanged(): Event<T> {\n        return this.stateChanged.event;\n    }\n\n    reachedState(state: T): Promise<void> {\n        if (this.deferred[state] === undefined) {\n            this.deferred[state] = new Deferred();\n        }\n        return this.deferred[state].promise;\n    }\n\n    reachedAnyState(...states: T[]): Promise<void> {\n        return Promise.race(states.map(s => this.reachedState(s)));\n    }\n\n}\n","export * from './application-protocol';\nexport * from './application-error';\n","export const ConfigProvider = Symbol('ConfigProvider');\n\nexport interface ConfigProvider {\n    get<T>(key: string, defaultValue?: T): T;\n}\n","import { ConfigProvider } from './config-protocol';\nimport { Component } from '../annotation';\nconst jexl = require('jexl');\n\n@Component(ConfigProvider)\nexport class ConfigProviderImpl implements ConfigProvider {\n    get<T>(key: string, defaultValue?: T): T {\n        return jexl.evalSync(key, process.env.MALAGU_CONFIG) || defaultValue;\n    }\n\n}\n","export * from './config-protocol';\nexport * from './config-provider';\n","export const METADATA_KEY = {\n    rebind: 'malagu:rebind',\n    constantValue: 'malagu:constant-value',\n    toService: 'malagu:to-service',\n    provide: 'inversify-binding-decorators:provide'\n};\n","import { interfaces as inversifyInterfaces, ContainerModule } from 'inversify';\nimport interfaces from 'inversify-binding-decorators/dts/interfaces/interfaces';\nimport { METADATA_KEY } from '../constants';\nimport { CustomError } from 'ts-custom-error';\nimport { ConstantOption } from '../annotation/constant';\n\nclass NoOpError extends CustomError {\n}\n\nexport function autoBind(registry?: inversifyInterfaces.ContainerModuleCallBack): inversifyInterfaces.ContainerModule {\n    return new ContainerModule((bind, unbind, isBound, rebind) => {\n        const provideMetadata: interfaces.ProvideSyntax[] = Reflect.getMetadata(METADATA_KEY.provide, Reflect) || [];\n        provideMetadata.map(metadata => resolve(metadata, bind, rebind));\n        Reflect.defineMetadata(METADATA_KEY.provide, [], Reflect);\n        const constantMetadata: ConstantOption[] = Reflect.getMetadata(METADATA_KEY.constantValue, Reflect) || [];\n        constantMetadata.map(metadata => resolveConstant(metadata, bind, rebind));\n        Reflect.defineMetadata(METADATA_KEY.constantValue, [], Reflect);\n\n        if (registry) {\n            registry(bind, unbind, isBound, rebind);\n        }\n    });\n}\n\nfunction resolve(metadata: interfaces.ProvideSyntax, bind: inversifyInterfaces.Bind, rebind: inversifyInterfaces.Rebind) {\n    const isRebind: boolean = Reflect.getOwnMetadata(METADATA_KEY.rebind, metadata.implementationType);\n    const id = Reflect.getOwnMetadata(METADATA_KEY.toService, metadata.implementationType);\n\n    const bindWrapper = (serviceIdentifier: inversifyInterfaces.ServiceIdentifier<any>) => {\n        if (id && id !== serviceIdentifier) {\n            bind(serviceIdentifier).toService(id);\n            throw new NoOpError();\n        }\n        if (isRebind) {\n            return rebind(serviceIdentifier);\n        }\n        return bind(serviceIdentifier);\n    };\n    try {\n        metadata.constraint(bindWrapper, metadata.implementationType);\n    } catch (error) {\n        if (error instanceof NoOpError) {\n            return;\n        }\n        throw error;\n    }\n}\n\nfunction resolveConstant(metadata: ConstantOption, bind: inversifyInterfaces.Bind, rebind: inversifyInterfaces.Rebind) {\n    const ids = Array.isArray(metadata.id) ? metadata.id : [ metadata.id ];\n    const id = ids.shift();\n    if (metadata.rebind) {\n        rebind(id!).toConstantValue(metadata.constantValue);\n    } else {\n        bind(id!).toConstantValue(metadata.constantValue);\n    }\n\n    for (const item of ids) {\n        bind(item!).toService(id!);\n    }\n}\n","import { Container } from 'inversify';\n\nlet _container: Container;\n\nexport namespace ContainerProvider {\n    export function set(container: Container) {\n        _container = container;\n    }\n    export function provide() {\n        if (!_container) {\n            throw new Error('Container is not ready yet, the timing is incorrect.');\n        }\n        return _container;\n    }\n}\n","import { Container } from 'inversify';\n\n// dynamic loading component module at compile time\nexport const container: Promise<Container> = Promise.resolve(new Container());\n","export * from './container-provider';\nexport * from './auto-bind';\n","import { CustomError as BaseCustomError } from 'ts-custom-error';\n\nexport class CustomError extends BaseCustomError {\n\n}\n","export * from './error-protocol';\nexport * from './cutom-error';\nexport * from './validation-errors';\n","import { CustomError } from './cutom-error';\nimport { ValidationError } from 'class-validator';\n\nexport class ValidationErrors extends CustomError {\n\n    constructor(errors?: ValidationError[]) {\n        super(errors === undefined ? undefined : JSON.stringify(errors));\n    }\n\n}\n","export * from './utils';\nexport * from './annotation';\nexport * from './application';\nexport * from './logger';\nexport * from './container';\nexport * from './aop';\nexport * from './constants';\nexport * from './config';\nexport * from './error';\nexport * from './pipe';\n","import { Logger as ILoger } from 'vscode-jsonrpc';\n\nexport class ConsoleLogger implements ILoger {\n    public error(message: string): void {\n        console.error(message);\n    }\n\n    public warn(message: string): void {\n        console.warn(message);\n    }\n\n    public info(message: string): void {\n        console.info(message);\n    }\n\n    public log(message: string): void {\n        console.log(message);\n    }\n\n    public debug(message: string): void {\n        console.debug(message);\n    }\n}\n","export * from './logger-protocol';\nexport * from './console-logger';\n","import * as log from 'loglevel';\n\nexport const LOGGER_LEVEL = 'malagu.logger.level';\nexport const Logger = Symbol('Logger');\n\nexport interface Logger extends log.Logger {\n}\n","export * from './pipe-manager';\nexport * from './pipe-protocol';\nexport * from './pipe-provider';\nexport * from './pipe-transtorm';\n","import { Component, Autowired } from '../annotation';\nimport { PipeManager, PipeProvider, MethodMetadata } from './pipe-protocol';\nimport { getTarget } from '../utils';\n\n@Component(PipeManager)\nexport class PipeManagerImpl implements PipeManager {\n\n    @Autowired(PipeProvider)\n    protected readonly pipeProvider: PipeProvider;\n\n    async apply(metadata: MethodMetadata, args: any[]): Promise<void> {\n        const paramTypes = Reflect.getMetadata('design:paramtypes', getTarget(metadata.target), metadata.method);\n        for (let index = 0; index < args.length; index++) {\n            let arg = args[index];\n            for (const pipe of this.pipeProvider.provide()) {\n                arg = await pipe.transform(arg, { argType: index < paramTypes.length ? paramTypes[index] : undefined });\n            }\n            args[index] = arg;\n        }\n    }\n\n}\n","import { Type } from '../utils';\n\nexport const PipeTransform = Symbol('PipeTransform');\nexport const PipeProvider = Symbol('PipeProvider');\nexport const PipeManager = Symbol('PipeManager');\n\nexport interface ArgumentMetadata {\n\n    readonly argType?: Type<any>;\n\n    readonly data?: string;\n}\n\nexport interface MethodMetadata {\n\n    readonly target: Type<any>;\n\n    readonly method: string | symbol;\n}\n\nexport interface PipeTransform<T = any, R = any> {\n    readonly priority: number;\n    transform(value: T, metadata: ArgumentMetadata): R;\n}\n\nexport interface PipeProvider {\n    provide(): PipeTransform[];\n}\n\nexport interface PipeManager {\n    apply(metadata: MethodMetadata, args: any[]): Promise<void>;\n}\n","import { Component, Autowired } from '../annotation';\nimport { PipeTransform, PipeProvider } from './pipe-protocol';\nimport { Prioritizeable } from '../utils';\n\n@Component(PipeProvider)\nexport class PipeProviderImpl implements PipeProvider {\n\n    protected prioritized: PipeTransform[];\n\n    constructor(\n        @Autowired(PipeTransform)\n        protected readonly pipes: PipeTransform[]\n    ) { }\n\n    provide(): PipeTransform[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.pipes).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { Component, Value } from '../annotation';\nimport { PipeTransform, ArgumentMetadata } from './pipe-protocol';\nimport { ValidationErrors } from '../error';\nimport { isNull } from 'util';\nimport { validate } from 'class-validator';\nimport { classToPlain, plainToClass } from 'class-transformer';\n\n@Component(PipeTransform)\nexport class ValidationPipe implements PipeTransform<any> {\n\n    @Value('malagu.core.validationPipeOptions')\n    protected options: any;\n\n    readonly priority = 1000;\n\n    public async transform(value: any, metadata: ArgumentMetadata) {\n        const opts = this.options || {};\n        const { argType } = metadata;\n        if (!argType || !this.toValidate(metadata)) {\n            return value;\n        }\n        const originalValue = value;\n        value = this.toEmptyIfNil(value);\n\n        const isNil = value !== originalValue;\n        const isPrimitive = this.isPrimitive(value);\n        this.stripProtoKeys(value);\n        let entity = plainToClass(\n            argType,\n            value,\n            opts.transformOptions,\n        );\n\n        const originalEntity = entity;\n        const isCtorNotEqual = entity.constructor !== argType;\n\n        if (isCtorNotEqual && !isPrimitive) {\n            entity.constructor = argType;\n        } else if (isCtorNotEqual) {\n            // when \"entity\" is a primitive value, we have to temporarily\n            // replace the entity to perform the validation against the original\n            // metatype defined inside the handler\n            entity = { constructor: argType } as any;\n        }\n\n        const errors = await validate(entity, opts.validatorOptions);\n        if (errors.length > 0) {\n            throw new ValidationErrors(opts.detailedOutputDisabled ? undefined : errors);\n        }\n        if (isPrimitive) {\n            // if the value is a primitive value and the validation process has been successfully completed\n            // we have to revert the original value passed through the pipe\n            entity = originalEntity;\n        }\n        if (opts.transformEnabled) {\n            return entity;\n        }\n        if (isNil) {\n            // if the value was originally undefined or null, revert it back\n            return originalValue;\n        }\n        return Object.keys(opts.validatorOptions).length > 0\n            ? classToPlain(entity, opts.transformOptions)\n            : value;\n    }\n\n    private toValidate(metadata: ArgumentMetadata): boolean {\n        const { argType } = metadata;\n        const types = [String, Boolean, Number, Array, Object];\n        return !types.some(t => argType === t) && !isNull(argType);\n    }\n\n    private toEmptyIfNil<T = any, R = any>(value: T): R | {} {\n        return isNull(value) ? {} : value;\n    }\n\n    private stripProtoKeys(value: Record<string, any>) {\n        delete value.__proto__;\n        const keys = Object.keys(value);\n        keys\n            .filter(key => typeof value[key] === 'object' && value[key])\n            .forEach(key => this.stripProtoKeys(value[key]));\n    }\n\n    private isPrimitive(value: unknown): boolean {\n        return ['number', 'boolean', 'string'].indexOf(typeof value) !== -1;\n    }\n}\n","export function getSuperClasses(constructor: any) {\n    const constructors = [];\n    let current = constructor;\n    while (Object.getPrototypeOf(current)) {\n        current = Object.getPrototypeOf(current);\n        constructors.push(current);\n    }\n    return constructors;\n}\n","import { Disposable } from 'vscode-jsonrpc/lib/events';\n\nexport {\n    Disposable\n};\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    }\n\n}\n","export * from './prioritizeable';\nexport * from './promise-util';\nexport * from './types';\nexport * from './class-util';\nexport * from './metadata-util';\nexport * from './disposable';\nexport * from './os';\nexport * from './proxy-util';\n","import { getSuperClasses } from './class-util';\n\nexport function getOwnMetadata(metadataKey: string, constructor: Object, propertyKey?: string | symbol): any {\n    const constructors = [ constructor, ...getSuperClasses(constructor) ];\n    let result: any[] = [];\n    for (let index = 0; index < constructors.length; index++) {\n        const c = constructors[constructors.length - index - 1];\n        let metadata: any[];\n        if (propertyKey) {\n            metadata = Reflect.getOwnMetadata(metadataKey, c, propertyKey);\n        } else {\n            metadata = Reflect.getOwnMetadata(metadataKey, c);\n        }\n\n        if (metadata) {\n            if (Array.isArray(metadata)) {\n                result = [ ...result, ...metadata ];\n            } else {\n                return metadata;\n            }\n        }\n    }\n    return result;\n}\n","function is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","export type MaybeArray<T> = T | T[];\nexport type MaybePromise<T> = T | Promise<T> | PromiseLike<T>;\n\nexport interface Prioritizeable<T> {\n    readonly priority: number;\n    readonly value: T;\n}\n\nexport namespace Prioritizeable {\n    export type GetPriority<T> = (value: T) => MaybePromise<number>;\n    export type GetPrioritySync<T> = (value: T) => number;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>, getPriority: GetPriority<T>): Promise<Prioritizeable<T>>;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]>;\n    export async function toPrioritizeable<T>(rawValue: MaybeArray<MaybePromise<T>>, getPriority: GetPriority<T>): Promise<MaybeArray<Prioritizeable<T>>> {\n        if (rawValue instanceof Array) {\n            return Promise.all(\n                rawValue.map(v => toPrioritizeable(v, getPriority))\n            );\n        }\n        const value = await rawValue;\n        const priority = await getPriority(value);\n        return { priority, value };\n    }\n    export function toPrioritizeableSync<T>(rawValue: T[], getPriority: GetPrioritySync<T> = value => (<any>value).priority): Prioritizeable<T>[] {\n        return rawValue.map(v => ({\n            value: v,\n            priority: getPriority(v)\n        }));\n    }\n    export function prioritizeAllSync<T>(values: T[], getPriority?: GetPrioritySync<T>): Prioritizeable<T>[] {\n        const prioritizeable = toPrioritizeableSync(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export async function prioritizeAll<T>(values: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]> {\n        const prioritizeable = await toPrioritizeable(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export function isValid<T>(p: Prioritizeable<T>): boolean {\n        return p.priority > 0;\n    }\n    export function compare<T>(p: Prioritizeable<T>, p2: Prioritizeable<T>): number {\n        return p2.priority - p.priority;\n    }\n}\n","export class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // tslint:disable-line\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n","\nexport function getTargetClass(obj: any) {\n    return obj.target ? obj.target.constructor : obj.constructor;\n\n}\n\nexport function getTarget(obj: any) {\n    return obj.target || obj;\n\n}\n","import { ApplicationState, AbstractApplicationStateService, ApplicationStateService, Component } from '../../common';\n\nexport type BackendApplicationState = ApplicationState;\n\n@Component(ApplicationStateService)\nexport class BackendApplicationStateService extends AbstractApplicationStateService<BackendApplicationState> {\n\n}\n","import { ApplicationStateService, AbstractApplication, Application, Component, Autowired } from '../../common';\nimport { BackendApplicationStateService } from './backend-application-state';\n\n@Component(Application)\nexport class BackendApplication extends AbstractApplication {\n\n    @Autowired(ApplicationStateService)\n    protected readonly stateService: BackendApplicationStateService;\n\n    async start(): Promise<void> {\n        this.setupExitSignals();\n        await this.doStart();\n        this.stateService.state = 'started';\n        this.stateService.state = 'ready';\n    }\n\n    protected setupExitSignals() {\n        process.removeListener('SIGINT', this.doExit);\n        process.removeListener('SIGTERM', this.doExit);\n\n        process.on('SIGINT', this.doExit.bind(this));\n        process.on('SIGTERM', this.doExit.bind(this));\n    }\n\n    protected doExit() {\n        this.doStop();\n        process.exit(0);\n    }\n}\n","export * from './backend-application';\nexport * from './backend-application-state';\n","export * from './application';\n","export * from '../common';\nimport { LogLevelDesc, getLogger } from 'loglevel';\nimport 'reflect-metadata';\nimport { autoBind, ConfigProvider, Logger, LOGGER_LEVEL, VALUE } from '../common';\nexport * from '.';\n\nexport const CoreBackendModule = autoBind(bind => {\n    bind(Logger).toDynamicValue(ctx => {\n        const configProvider = ctx.container.get<ConfigProvider>(ConfigProvider);\n        const level = configProvider.get<LogLevelDesc>(LOGGER_LEVEL, 'ERROR');\n        const logger = getLogger('FrontendApplicationLogger');\n        logger.setDefaultLevel(level);\n        return logger;\n    }).inSingletonScope();\n\n    bind(VALUE).toDynamicValue(ctx => {\n        const namedMetadata = ctx.currentRequest.target.getNamedTag();\n        const el = namedMetadata!.value.toString();\n        const configProvider = ctx.container.get<ConfigProvider>(ConfigProvider);\n        return configProvider.get(el);\n    });\n});\n","import { autoBind } from '@malagu/core';\n\nexport default autoBind();\n","export const MVC_PATH = 'malagu.mvc.path';\n","export * from './constants';\n","import { METADATA_KEY } from '../constants';\n\nexport interface BodyMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface BodyDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Body = <BodyDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyBodyDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyBodyDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyBodyDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: BodyMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerBody, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerBody, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\nimport { ErrorType } from '@malagu/core';\n\nexport interface CatchMetadata {\n    errorTypes: ErrorType[];\n    target: any;\n    key: string;\n    descriptor: TypedPropertyDescriptor<Function>;\n}\n\nexport interface CatchDecorator {\n    (errorTypes: ErrorType | ErrorType[]): MethodDecorator;\n}\n\nexport const Catch = <CatchDecorator>function (errorTypes: ErrorType | ErrorType[]) {\n    return (t: any, k: string, d: TypedPropertyDescriptor<Function>) => {\n        applyCatchDecorator(t, k, d, Array.isArray(errorTypes) ? errorTypes : [ errorTypes ]);\n    };\n};\n\nexport function applyCatchDecorator(target: any, key: string, descriptor: TypedPropertyDescriptor<Function>, errorTypes: ErrorType[]): void {\n    const metadata: CatchMetadata = { errorTypes, target, key, descriptor };\n    let metadataList: CatchMetadata[] = [];\n\n    if (!Reflect.hasOwnMetadata(METADATA_KEY.controllerCatch, target.constructor)) {\n        Reflect.defineMetadata(METADATA_KEY.controllerCatch, metadataList, target.constructor);\n    } else {\n        metadataList = Reflect.getOwnMetadata(METADATA_KEY.controllerCatch, target.constructor);\n    }\n    metadataList.push(metadata);\n}\n","import { METADATA_KEY } from '../constants';\nimport { Component } from '@malagu/core';\n\nexport const CONTROLLER = Symbol('Controller');\n\nexport interface ControllerMetadata {\n    path: string;\n    target: any;\n}\n\nexport function Controller(path: string = '') {\n    return function (target: any) {\n        const metadata: ControllerMetadata = { path, target };\n        Reflect.defineMetadata(METADATA_KEY.controller, metadata, target);\n        Component({ id: CONTROLLER, proxy: true })(target);\n    };\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestCookieMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseCookieMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface CookieDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Cookie = <CookieDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestCookieDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseCookieDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestCookieDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestCookieDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestCookieMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestCookie, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestCookie, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseCookieDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseCookieMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseCookie, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseCookie, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestHeaderMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseHeaderMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface HeaderDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Header = <HeaderDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestHeaderDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseHeaderDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestHeaderDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestHeaderDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestHeaderMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestHeader, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestHeader, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseHeaderDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseHeaderMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseHeader, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseHeader, metadatas, target.constructor, targetKey);\n}\n","export * from './body';\nexport * from './controller';\nexport * from './header';\nexport * from './method';\nexport * from './param';\nexport * from './query';\nexport * from './view';\nexport * from './cookie';\nexport * from './session';\nexport * from './catch';\n","import { METADATA_KEY } from '../constants';\n\nexport type StrOrRegex = string | RegExp;\nexport type RouteOptions = StrOrRegex | { path: StrOrRegex } | { options: Object, path: StrOrRegex } & Object;\n\nexport interface MethodMetadata {\n    options: RouteOptions;\n    target: any;\n    method: string;\n    key: string;\n    descriptor: TypedPropertyDescriptor<Function>;\n}\n\nexport interface MethodDecorator {\n    (\n        method: string,\n        options?: RouteOptions,\n    ): (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) => void;\n}\n\nexport interface HandlerDecorator {\n    (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>): void;\n}\n\nexport function Get(options?: RouteOptions): HandlerDecorator {\n    return Method('get', options);\n}\n\nexport function Post(options?: RouteOptions): HandlerDecorator {\n    return Method('post', options);\n}\n\nexport function Put(options?: RouteOptions): HandlerDecorator {\n    return Method('put', options);\n}\n\nexport function Patch(options?: RouteOptions): HandlerDecorator {\n    return Method('patch', options);\n}\n\nexport function Head(options?: RouteOptions): HandlerDecorator {\n    return Method('head', options);\n}\n\nexport function Delete(options?: RouteOptions): HandlerDecorator {\n    return Method('delete', options);\n}\n\nexport function Options(options?: RouteOptions): HandlerDecorator {\n    return Method('options', options);\n}\n\nexport const Method = <MethodDecorator>function (\n    method: string,\n    options: RouteOptions = '',\n): HandlerDecorator {\n    return function (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) {\n        const metadata: MethodMetadata = { options, method, target, key, descriptor };\n        let metadataList: MethodMetadata[] = [];\n\n        if (!Reflect.hasOwnMetadata(METADATA_KEY.controllerMethod, target.constructor)) {\n            Reflect.defineMetadata(METADATA_KEY.controllerMethod, metadataList, target.constructor);\n        } else {\n            metadataList = Reflect.getOwnMetadata(METADATA_KEY.controllerMethod, target.constructor);\n        }\n        metadataList.push(metadata);\n    };\n};\n","import { METADATA_KEY } from '../constants';\n\nexport interface ParamMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ParamDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Param = <ParamDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyParamDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyParamDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyParamDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: ParamMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerParam, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerParam, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface QueryMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface QueryDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Query = <QueryDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyQueryDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyQueryDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyQueryDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: QueryMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerQuery, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerQuery, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestSessionMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseSessionMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface SessionDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Session = <SessionDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestSessionDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseSessionDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestSessionDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestSessionDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestSessionMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestSession, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestSession, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseSessionDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseSessionMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseSession, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseSession, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface ViewMetadata {\n    viewName: string;\n}\n\nexport interface ViewDecorator {\n    (viewName: string): (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) => void;\n}\n\nexport const View = <ViewDecorator>function (viewName: string) {\n    return (t: any, k: string, d: TypedPropertyDescriptor<Function>) => {\n        applyViewDecorator(t, k, d, viewName);\n    };\n};\n\nexport function applyViewDecorator(target: any, targetKey: string, descriptor: TypedPropertyDescriptor<Function>, viewName: string): void {\n    Reflect.defineMetadata(METADATA_KEY.controllerView, { viewName }, target.constructor, targetKey);\n}\n","export const METADATA_KEY = {\n    controller: 'malagu:controller',\n    controllerMethod: 'malagu:controller-method',\n    controllerParam: 'malagu:controller-param',\n    controllerRequestHeader: 'malagu:controller-request-header',\n    controllerResponseHeader: 'malagu:controller-response-header',\n    controllerRequestCookie: 'malagu:controller-request-cookie',\n    controllerResponseCookie: 'malagu:controller-response-cookie',\n    controllerRequestSession: 'malagu:controller-request-session',\n    controllerResponseSession: 'malagu:controller-response-session',\n    controllerQuery: 'malagu:controller-query',\n    controllerBody: 'malagu:controller-body',\n    controllerView: 'malagu:controller-view',\n    controllerCatch: 'malagu:controller-catch'\n\n};\n","import { Component, Autowired, Value } from '@malagu/core';\nimport { PathResolver } from '@malagu/web';\nimport { Context, HttpError, RequestMatcher, HandlerAdapter } from '@malagu/web/lib/node';\nimport { ViewResolver, ResponseResolverProvider, MethodArgsResolverProvider } from '../resolver';\nimport { MVC_HANDLER_ADAPTER_PRIORITY, RouteMetadataMatcher } from './handler-protocol';\nimport { MVC_PATH } from '../../common';\nimport { PipeManager } from '@malagu/core';\n\n@Component(HandlerAdapter)\nexport class MvcHandlerAdapter implements HandlerAdapter {\n    readonly priority = MVC_HANDLER_ADAPTER_PRIORITY;\n\n    @Autowired(MethodArgsResolverProvider)\n    protected readonly methodArgsResolverProvider: MethodArgsResolverProvider;\n\n    @Autowired(ResponseResolverProvider)\n    protected readonly responseResolverProvider: ResponseResolverProvider;\n\n    @Autowired(ViewResolver)\n    protected readonly viewResolver: ViewResolver;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    @Autowired(PathResolver)\n    protected readonly pathResolver: PathResolver;\n\n    @Autowired(PipeManager)\n    protected readonly pipeManager: PipeManager;\n\n    @Value(MVC_PATH)\n    protected readonly mvcPath: string;\n\n    @Autowired(RouteMetadataMatcher)\n    protected readonly routeMetadataMatcher: RouteMetadataMatcher;\n\n    protected async resolveMethodArgs(metadata: any) {\n        const args: any[] = [];\n        for (const resolver of this.methodArgsResolverProvider.provide()) {\n            await resolver.resolve(metadata, args);\n        }\n        return args;\n    }\n\n    protected async resolveResponse(metadata: any) {\n        for (const resolver of this.responseResolverProvider.provide()) {\n            await resolver.resolve(metadata);\n        }\n    }\n\n    async handle(): Promise<void> {\n        const ctx = Context.getCurrent();\n        const path = ctx.request.path;\n        const routeMetadata = await this.routeMetadataMatcher.match();\n        if (routeMetadata) {\n            await this.doHandle(routeMetadata);\n        } else {\n            const error = new HttpError(404, `No mapping found: ${ctx.request.method} ${path}`);\n            await this.doHandle(await this.getErrorMetadata(error), error);\n        }\n    }\n\n    protected async doHandle(metadata: any, err?: any): Promise<void> {\n        let args = await this.resolveMethodArgs(metadata);\n        if (err) {\n            args = [err, ...args];\n        }\n        const methodMetadata = metadata.methodMetadata;\n        const target = methodMetadata.target;\n        let model: any;\n        try {\n            await this.pipeManager.apply({ target, method: methodMetadata.key }, args);\n            model = await target[methodMetadata.key](...args);\n        } catch (error) {\n            if (!err) {\n                const errorMetadata = await this.getErrorMetadata(error);\n                if (!errorMetadata.viewMetadata.viewName) {\n                    errorMetadata.viewMetadata.viewName = metadata.viewMetadata.viewName;\n                }\n                await this.doHandle(errorMetadata, error);\n            } else {\n                throw error;\n            }\n        }\n        if (model) {\n            await this.viewResolver.resolve(metadata, model);\n        }\n        await this.resolveResponse(metadata);\n    }\n\n    protected async getErrorMetadata(error: Error) {\n        const routeMetadata = await this.routeMetadataMatcher.match(error);\n        if (routeMetadata) {\n            return routeMetadata;\n        }\n        throw error;\n    }\n\n    async canHandle(): Promise<boolean> {\n        return this.requestMatcher.match(await this.pathResolver.resolve(this.mvcPath));\n    }\n}\n","import { StrOrRegex, ParamMetadata, BodyMetadata, QueryMetadata, RequestHeaderMetadata,\n    ResponseHeaderMetadata, RequestCookieMetadata, ResponseCookieMetadata, RequestSessionMetadata,\n    ResponseSessionMetadata, ViewMetadata, MethodMetadata, CatchMetadata, ControllerMetadata } from '../annotation';\nimport { ErrorType } from '@malagu/core';\n\nexport const MVC_HANDLER_ADAPTER_PRIORITY = 1900;\n\nexport const RouteProvider = Symbol('RouteProvider');\nexport const RouteMetadataMatcher = Symbol('RouteMetadataMatcher');\n\nexport interface Route {\n    mapping: Map<string, Map<StrOrRegex, RouteMetadata>>;\n    errorMapping: Map<ErrorType, RouteMetadata>;\n}\n\nexport interface RouteMetadata {\n    controllerMetadata: ControllerMetadata;\n    methodMetadata: MethodMetadata | CatchMetadata;\n    paramMetadata?: ParamMetadata[];\n    bodyMetadata?: BodyMetadata[];\n    queryMetadata?: QueryMetadata[];\n    requestHeaderMetadata?: RequestHeaderMetadata[];\n    responseHeaderMetadata?: ResponseHeaderMetadata[];\n    requestCookieMetadata?: RequestCookieMetadata[];\n    responseCookieMetadata?: ResponseCookieMetadata[];\n    requestSessionMetadata?: RequestSessionMetadata[];\n    responseSessionMetadata?: ResponseSessionMetadata[];\n    viewMetadata: ViewMetadata;\n}\n\nexport interface RouteProvider {\n    provide(): Promise<Route>;\n}\n\nexport interface RouteMetadataMatcher {\n    match(error?: Error): Promise<RouteMetadata | undefined>;\n}\n","export * from './handler-adapter';\nexport * from './handler-protocol';\nexport * from './route-builder';\nexport * from './route-provider';\nexport * from './route-metadata-matcher';\n","import { CONTROLLER, ControllerMetadata } from '../annotation/controller';\nimport { METADATA_KEY } from '../constants';\nimport { StrOrRegex, MethodMetadata } from '../annotation/method';\nimport { getOwnMetadata, Component, Autowired, Optional, ErrorType } from '@malagu/core';\nimport { PathResolver } from '@malagu/web';\nimport { CatchMetadata } from '../annotation';\nimport { RouteMetadata } from './handler-protocol';\nimport { getTargetClass } from '@malagu/core/lib/common/utils/proxy-util';\n\n@Component()\nexport class RouteBuilder {\n\n    @Autowired(CONTROLLER) @Optional\n    protected readonly controllers: any[] = [];\n\n    @Autowired(PathResolver)\n    protected readonly pathResolver: PathResolver;\n\n    async build() {\n        const mapping: Map<string, Map<StrOrRegex, RouteMetadata>> = new Map<string, Map<StrOrRegex, any>>();\n        const errorMapping: Map<ErrorType, any> = new Map<ErrorType, RouteMetadata>();\n\n        for (const controller of this.controllers) {\n            const targetConstructor = getTargetClass(controller);\n\n            const controllerMetadata = <ControllerMetadata>Reflect.getOwnMetadata(METADATA_KEY.controller, targetConstructor);\n            await this.doBuildRouteMap(mapping, targetConstructor, controller, controllerMetadata);\n            await this.doBuildErrorRouteMap(errorMapping, targetConstructor, controller, controllerMetadata);\n\n        }\n        return {\n            mapping,\n            errorMapping\n        };\n    }\n\n    protected async doBuildRouteMap(mapping: Map<string, Map<StrOrRegex, RouteMetadata>>, targetConstructor: any, controller: any, controllerMetadata: ControllerMetadata) {\n\n        const methodMetadata: MethodMetadata[] = getOwnMetadata(\n            METADATA_KEY.controllerMethod,\n            targetConstructor\n        );\n        for (const metadata of methodMetadata) {\n            const routeOptions: any = (typeof metadata.options === 'string' || metadata.options instanceof RegExp) ? { path: metadata.options } : metadata.options;\n            const m = { ...metadata };\n            const method = m.method;\n            m.target = controller;\n            let pathMap = mapping.get(method);\n            if (!pathMap) {\n                pathMap = new Map<StrOrRegex, RouteMetadata>();\n                mapping.set(method, pathMap);\n            }\n            let path: StrOrRegex = routeOptions.path;\n            if (typeof path === 'string' ) {\n                path = await this.pathResolver.resolve(controllerMetadata.path, path);\n            } else if (path instanceof RegExp) {\n                if (controllerMetadata.path) {\n                    path = new RegExp(await this.pathResolver.resolve(controllerMetadata.path, path.source));\n                }\n            }\n            pathMap.set(path, {\n                controllerMetadata,\n                methodMetadata: m,\n                ...this.doRouteMetadata(targetConstructor, m.key)\n            });\n        }\n    }\n\n    protected async doBuildErrorRouteMap(errorMapping: Map<ErrorType, RouteMetadata>, targetConstructor: any, controller: any, controllerMetadata: ControllerMetadata) {\n        const methodMetadata: CatchMetadata[] = getOwnMetadata(\n            METADATA_KEY.controllerCatch,\n            targetConstructor\n        );\n        for (const metadata of methodMetadata) {\n            const m = { ...metadata };\n            m.target = controller;\n            for (const errorType of metadata.errorTypes) {\n                errorMapping.set(errorType, {\n                    controllerMetadata,\n                    methodMetadata: m,\n                    ...this.doRouteMetadata(targetConstructor, m.key)\n                });\n            }\n        }\n    }\n\n    protected doRouteMetadata(targetConstructor: any, method: string) {\n        return {\n            paramMetadata: getOwnMetadata(METADATA_KEY.controllerParam, targetConstructor, method),\n            bodyMetadata: getOwnMetadata(METADATA_KEY.controllerBody, targetConstructor, method),\n            queryMetadata: getOwnMetadata(METADATA_KEY.controllerQuery, targetConstructor, method),\n            requestHeaderMetadata: getOwnMetadata(METADATA_KEY.controllerRequestHeader, targetConstructor, method),\n            responseHeaderMetadata: getOwnMetadata(METADATA_KEY.controllerResponseHeader, targetConstructor, method),\n            requestCookieMetadata: getOwnMetadata(METADATA_KEY.controllerRequestCookie, targetConstructor, method),\n            responseCookieMetadata: getOwnMetadata(METADATA_KEY.controllerResponseCookie, targetConstructor, method),\n            requestSessionMetadata: getOwnMetadata(METADATA_KEY.controllerRequestSession, targetConstructor, method),\n            responseSessionMetadata: getOwnMetadata(METADATA_KEY.controllerResponseSession, targetConstructor, method),\n            viewMetadata: getOwnMetadata(METADATA_KEY.controllerView, targetConstructor, method) || { }\n        };\n    }\n}\n","import { Component, Autowired } from '@malagu/core';\nimport { RouteProvider, RouteMetadata, RouteMetadataMatcher } from './handler-protocol';\nimport { Context, RequestMatcher } from '@malagu/web/lib/node';\n\nexport const PATH_PARMAS_ATTR = 'pathParams';\n\n@Component(RouteMetadataMatcher)\nexport class RouteMetadataMatcherImpl implements RouteMetadataMatcher {\n\n    @Autowired(RouteProvider)\n    protected readonly routeProvider: RouteProvider;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    async match(error?: Error): Promise<RouteMetadata | undefined> {\n        const route = await this.routeProvider.provide();\n        if (error) {\n            const metadata = route.errorMapping.get(error.constructor);\n            if (metadata) {\n                return metadata;\n            } else {\n                for (const entry of route.errorMapping) {\n                    if (error instanceof <any>entry[0]) {\n                        return entry[1];\n                    }\n                }\n            }\n        } else {\n            const request = Context.getRequest();\n            const pathMap = route.mapping.get(request.method!.toLowerCase());\n            if (pathMap) {\n                for (const entry of pathMap) {\n                    const [ p, metadata ] = entry;\n                    const pathParams = await this.requestMatcher.match(p);\n                    if (pathParams) {\n                        Context.setAttr(PATH_PARMAS_ATTR, pathParams);\n                        return metadata;\n                    }\n                }\n            }\n        }\n    }\n\n}\n","import { Component, Autowired, Deferred } from '@malagu/core';\nimport { Route, RouteProvider } from './handler-protocol';\nimport { RouteBuilder } from './route-builder';\nimport { postConstruct } from 'inversify';\n\n@Component(RouteProvider)\nexport class RouteProviderImpl implements RouteProvider {\n\n    protected route: Route;\n\n    protected routeDefered = new Deferred<Route>();\n\n    @Autowired(RouteBuilder)\n    protected readonly routeBuilder: RouteBuilder;\n\n    @postConstruct()\n    protected async init() {\n        this.route = await this.routeBuilder.build();\n        this.routeDefered.resolve(this.route);\n    }\n\n    async provide(): Promise<Route> {\n        return await this.routeDefered.promise;\n    }\n\n}\n","export * from './annotation';\nexport * from './handler';\nexport * from './resolver';\nexport * from './view';\n","import 'reflect-metadata';\nimport { autoBind } from '@malagu/core';\nimport '.';\n\nexport default autoBind();\n","export * from './response-resolver';\nexport * from './method-args-resolver';\nexport * from './method-args-resolver-provider';\nexport * from './resolver-protocol';\nexport * from './response-resolver-provider';\nexport * from './view-resolver';\nexport * from './view-resolver-provider';\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { MethodArgsResolver } from './resolver-protocol';\n\n@Component()\nexport class MethodArgsResolverProvider {\n\n    protected prioritized: MethodArgsResolver[];\n\n    constructor(\n        @Autowired(MethodArgsResolver)\n        protected readonly methodArgsResolvers: MethodArgsResolver[]\n    ) { }\n\n    provide(): MethodArgsResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.methodArgsResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { MethodArgsResolver } from './resolver-protocol';\nimport { Context } from '@malagu/web/lib/node';\nimport { Component } from '@malagu/core';\nimport { BodyMetadata, RequestHeaderMetadata, ParamMetadata, QueryMetadata, RequestCookieMetadata, RequestSessionMetadata } from '../annotation';\nimport { PATH_PARMAS_ATTR } from '../handler';\n\n@Component(MethodArgsResolver)\nexport class BodyMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 100;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const body: any = Context.getCurrent().request.body;\n        const bodyMetadatas = <BodyMetadata[]>metadata.bodyMetadata;\n        if (bodyMetadatas && body !== undefined) {\n            for (const m of bodyMetadatas) {\n                args[m.parameterIndex] = m.name ? body[m.name] : body;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class HeaderMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 200;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const headers: any = Context.getCurrent().request.headers;\n        const headerMetadatas = <RequestHeaderMetadata[]>metadata.requestHeaderMetadata;\n        if (headerMetadatas && headers !== undefined) {\n            for (const m of headerMetadatas) {\n                args[m.parameterIndex] = m.name ? headers[m.name] : headers;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class ParamMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 300;\n\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const params: any = Context.getAttr(PATH_PARMAS_ATTR);\n        const paramMetadatas = <ParamMetadata[]>metadata.paramMetadata;\n        if (paramMetadatas && params) {\n            for (const m of paramMetadatas) {\n                args[m.parameterIndex] = m.name ? params[m.name] : params;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class QueryMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 400;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const query: any = Context.getCurrent().request.query;\n        const queryMetadatas = <QueryMetadata[]>metadata.queryMetadata;\n        if (queryMetadatas && query !== undefined) {\n            for (const m of queryMetadatas) {\n                args[m.parameterIndex] = m.name ? query[m.name] : query;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class CookieMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 500;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const cookies = Context.getCookies();\n        const cookieMetadatas = <RequestCookieMetadata[]>metadata.requestCookieMetadata;\n        if (cookieMetadatas && cookies !== undefined) {\n            for (const m of cookieMetadatas) {\n                args[m.parameterIndex] = m.name ? cookies.get(m.name) : cookies;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class SessionMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 600;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const session = Context.getSession();\n        const sessionMetadatas = <RequestSessionMetadata[]>metadata.requestSessionMetadata;\n        if (sessionMetadatas && session !== undefined) {\n            for (const m of sessionMetadatas) {\n                args[m.parameterIndex] = m.name ? session[m.name] : session;\n            }\n        }\n    }\n}\n","\nexport const MethodArgsResolver = Symbol('MethodArgsResolver');\nexport const ResponseResolver = Symbol('ResponseResolver');\nexport const ViewResolver = Symbol('ViewResolver');\n\nexport interface MethodArgsResolver {\n    readonly priority: number;\n    resolve(metadata: any, args: any[]): Promise<void>;\n}\n\nexport interface ResponseResolver {\n    readonly priority: number;\n    resolve(metadata: any): Promise<void>;\n}\n\nexport interface ViewResolver {\n    resolve(metadata: any, model: any): Promise<void>;\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { ResponseResolver } from './resolver-protocol';\n\n@Component()\nexport class ResponseResolverProvider {\n\n    protected prioritized: ResponseResolver[];\n\n    constructor(\n        @Autowired(ResponseResolver)\n        protected readonly responseResolvers: ResponseResolver[]\n    ) { }\n\n    provide(): ResponseResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.responseResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { ResponseResolver } from './resolver-protocol';\nimport { Context } from '@malagu/web/lib/node';\nimport { Component } from '@malagu/core';\nimport { ResponseHeaderMetadata, ResponseCookieMetadata, ResponseSessionMetadata } from '../annotation';\n\n@Component(ResponseResolver)\nexport class HeaderResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const response = Context.getCurrent().response;\n        const headerMetadatas = <ResponseHeaderMetadata[]>metadata.responseHeaderMetadata;\n        if (headerMetadatas) {\n            for (const m of headerMetadatas) {\n                response.setHeader(m.name, m.value);\n            }\n        }\n    }\n}\n\n@Component(ResponseResolver)\nexport class CookieResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const cookies = Context.getCookies();\n        const cookieMetadatas = <ResponseCookieMetadata[]>metadata.responseCookieMetadata;\n        if (cookieMetadatas && cookies) {\n            for (const m of cookieMetadatas) {\n                cookies.set(m.name, m.value);\n            }\n        }\n    }\n}\n\n@Component(ResponseResolver)\nexport class SessionResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const session = Context.getSession();\n        const sessionMetadatas = <ResponseSessionMetadata[]>metadata.responseSessionMetadata;\n        if (sessionMetadatas && session) {\n            for (const m of sessionMetadatas) {\n                session[m.name] = m.value;\n            }\n        }\n    }\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { ViewResolver } from './resolver-protocol';\n\n@Component()\nexport class ViewResolverProvider {\n\n    protected prioritized: ViewResolver[];\n\n    constructor(\n        @Autowired(ViewResolver)\n        protected readonly viewResolvers: ViewResolver[]\n    ) { }\n\n    provide(): ViewResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.viewResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { ViewResolver } from './resolver-protocol';\nimport { Component, Autowired, Value } from '@malagu/core';\nimport { ViewProvider } from '../view/view-provider';\nimport { ViewMetadata } from '../annotation/view';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(ViewResolver)\nexport class ViewResolverImpl implements ViewResolver {\n\n    @Value('malagu.mvc.defaultViewName')\n    protected readonly defaultViewName: string;\n\n    @Autowired\n    protected readonly viewProvider: ViewProvider;\n\n    async resolve(metadata: any, model: any): Promise<void> {\n        const viewMetadata = <ViewMetadata>metadata.viewMetadata;\n        const viewName = viewMetadata.viewName || this.defaultViewName;\n        for (const view of this.viewProvider.provide()) {\n            if (await view.support(viewName)) {\n                Context.getResponse().setHeader('Content-type', view.contentType);\n                await view.render(model);\n                return;\n            }\n        }\n        throw new Error('Not found a suitable view.');\n    }\n}\n","export * from './json-view';\nexport * from './text-view';\nexport * from './view-provider';\n","import { Component } from '@malagu/core';\nimport { View } from './view-protocol';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(View)\nexport class JsonView implements View {\n\n    static VIEW_NAME = 'json';\n\n    readonly contentType = 'application/json';\n\n    readonly priority = 500;\n\n    async render(model: any): Promise<void> {\n        const response = Context.getCurrent().response;\n        response.body = JSON.stringify(model);\n    }\n\n    support(viewName: string): Promise<boolean> {\n        return Promise.resolve(viewName === JsonView.VIEW_NAME);\n    }\n}\n","import { Component } from '@malagu/core';\nimport { View } from './view-protocol';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(View)\nexport class TextView implements View {\n\n    static VIEW_NAME = 'text';\n\n    readonly contentType = 'text/plain';\n\n    readonly priority = 600;\n\n    async render(model: any): Promise<void> {\n        const response = Context.getCurrent().response;\n        response.body = model;\n    }\n\n    support(viewName: string): Promise<boolean> {\n        return Promise.resolve(viewName === TextView.VIEW_NAME);\n    }\n}\n","export const View = Symbol('View');\n\nexport interface View {\n    readonly contentType: string;\n    render(model: any): Promise<void>;\n    support(viewName: string): Promise<boolean>;\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { View } from './view-protocol';\n\n@Component()\nexport class ViewProvider {\n\n    protected prioritized: View[];\n\n    constructor(\n        @Autowired(View)\n        protected readonly views: View[]\n    ) { }\n\n    provide(): View[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.views).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { autoBind } from '@malagu/core';\n\nexport default autoBind();\n","import { AutowiredDecorator, getAutowiredOption, applyAutowiredDecorator } from '@malagu/core';\nimport { inject, named } from 'inversify';\nimport { ServiceIdentifierOrFunc } from 'inversify/dts/annotation/inject';\n\nexport const RPC = Symbol('RPC');\n\nexport const Autorpc = <AutowiredDecorator>function (target: any, targetKey: string, index?: number) {\n    const option = getAutowiredOption(target, targetKey, index);\n    const doInject = (id: ServiceIdentifierOrFunc, isMulti: boolean, t: any, k: string, i?: number) => {\n        inject(RPC)(t, k, i);\n        named(id.toString())(t, k, i);\n    };\n\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i?: number) => {\n            applyAutowiredDecorator(option, t, tk, i, doInject);\n        };\n\n    } else {\n        applyAutowiredDecorator(option, target, targetKey, index, doInject);\n    }\n};\n","export * from './rpc';\nexport * from './autorpc';\n","import { interfaces } from 'inversify';\nimport { fluentProvide } from 'inversify-binding-decorators';\nimport { ConnectionHandler, NoOpConnectionHandler, JsonRpcConnectionHandler } from '../jsonrpc';\nimport {applyComponentDecorator } from '@malagu/core';\nimport { PipeManager } from '@malagu/core';\n\nexport const Rpc = (id: interfaces.ServiceIdentifier<any>) => (target: any) => {\n    applyComponentDecorator({ id, proxy: true }, target);\n    fluentProvide(ConnectionHandler).inSingletonScope().onActivation(context => {\n        const t = context.container.get(id);\n        const pipeManager = context.container.get<PipeManager>(PipeManager);\n        return new JsonRpcConnectionHandler(id.toString(), () => t, pipeManager);\n    }).done(true)(NoOpConnectionHandler);\n};\n","export const RPC_PATH = 'malagu.rpc.path';\n","export * from './annotation';\nexport * from './jsonrpc';\nexport * from './constants';\n","import { Disposable } from 'vscode-jsonrpc';\nimport { DisposableCollection } from '@malagu/core';\n\nexport interface Channel {\n    handleMessage(message: Channel.Message): void;\n    send(content: string): void;\n    onMessage(cb: (data: any) => void): void;\n}\n\nexport namespace Channel {\n    export interface OpenMessage {\n        kind: 'open'\n        id: number\n        path: string\n    }\n    export interface ReadyMessage {\n        kind: 'ready'\n        id: number\n    }\n    export interface DataMessage {\n        kind: 'data'\n        id: number\n        content: string\n    }\n    export interface CloseMessage {\n        kind: 'close'\n        id: number\n        code: number\n        reason: string\n    }\n    export interface HttpMessage {\n        kind: 'http'\n        id: number\n        path?: string\n        content: string\n    }\n    export type Message = OpenMessage | ReadyMessage | DataMessage | CloseMessage | HttpMessage;\n}\n\nexport abstract class AbstractChannel implements Channel, Disposable {\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(\n        readonly id: number,\n        protected readonly doSend: (content: string) => Promise<void>\n    ) { }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected checkNotDisposed(): void {\n        if (this.toDispose.disposed) {\n            throw new Error('The channel has been disposed.');\n        }\n    }\n\n    abstract handleMessage(message: Channel.Message): void;\n\n    abstract doGetMessage(content: string): Channel.Message;\n\n    send(content: string): void {\n        this.checkNotDisposed();\n        this.doSend(JSON.stringify(this.doGetMessage(content)));\n    }\n\n    protected fireMessage: (data: any) => void = () => { };\n    onMessage(cb: (data: any) => void): void {\n        this.checkNotDisposed();\n        this.fireMessage = cb;\n        this.toDispose.push(Disposable.create(() => this.fireMessage = () => { }));\n    }\n\n    fireError: (reason: any) => void = () => { };\n    onError(cb: (reason: any) => void): void {\n        this.checkNotDisposed();\n        this.fireError = cb;\n        this.toDispose.push(Disposable.create(() => this.fireError = () => { }));\n    }\n\n}\n","import { MessageConnection, createMessageConnection, Logger } from 'vscode-jsonrpc';\nimport { Channel } from './channel-protocol';\nimport { ChannelMessageReader } from './reader';\nimport { ChannelMessageWriter } from './writer';\nimport { Component } from '@malagu/core';\n\nexport const ConnnectionFactory = Symbol('ConnnectionFactory');\n\nexport interface ConnnectionFactory<T> {\n    create(t: T, logger: Logger): MessageConnection;\n}\n@Component(ConnnectionFactory)\nexport class ConnnectionFactoryImpl implements ConnnectionFactory<Channel> {\n    create(channel: Channel, logger: Logger): MessageConnection {\n        const messageReader = new ChannelMessageReader(channel);\n        const messageWriter = new ChannelMessageWriter(channel);\n        const connection = createMessageConnection(messageReader, messageWriter, logger);\n        connection.onClose(() => connection.dispose());\n        return connection;\n    }\n}\n","import { MessageConnection } from 'vscode-jsonrpc';\n\nexport const ConnectionHandler = Symbol('ConnectionHandler');\n\nexport interface ConnectionHandler {\n    readonly path: string;\n    onConnection(connection: MessageConnection): void;\n}\n\nexport class NoOpConnectionHandler implements ConnectionHandler {\n    readonly path: string;\n    onConnection(connection: MessageConnection): void {}\n}\n","import { Channel, AbstractChannel } from './channel-protocol';\n\nexport class HttpChannel extends AbstractChannel {\n\n    constructor(\n        id: number,\n        doSend: (content: string) => Promise<void>,\n        protected readonly path?: string\n    ) {\n        super(id, doSend);\n    }\n\n    protected checkNotDisposed(): void {\n        // noop\n    }\n\n    handleMessage(message: Channel.HttpMessage) {\n        this.fireMessage(message.content);\n    }\n\n    doGetMessage(content: string): Channel.Message {\n        return <Channel.HttpMessage>{\n            kind: 'http',\n            id: this.id,\n            path: this.path,\n            content\n        };\n    }\n\n}\n","export * from './handler';\nexport * from './proxy-factory';\nexport * from './http-channel';\nexport * from './connection-factory';\nexport * from './reader';\nexport * from './writer';\nexport * from './channel-protocol';\n","import { MessageConnection, ResponseError, Emitter, Event } from 'vscode-jsonrpc';\nimport { ConnectionHandler } from './handler';\nimport { ApplicationError, Disposable } from '@malagu/core';\nimport { PipeManager } from '@malagu/core';\n\nexport type JsonRpcServer<Client> = Disposable & {\n    /**\n     * If this server is a proxy to a remote server then\n     * a client is used as a local object\n     * to handle JSON-RPC messages from the remote server.\n     */\n    setClient(client: Client | undefined): void;\n};\n\nexport interface JsonRpcConnectionEventEmitter {\n    readonly onDidOpenConnection: Event<void> ;\n    readonly onDidCloseConnection: Event<void>;\n}\nexport type JsonRpcProxy<T> = T & JsonRpcConnectionEventEmitter;\n\nexport class JsonRpcConnectionHandler<T extends object> implements ConnectionHandler {\n    constructor(\n        readonly path: string,\n        readonly targetFactory: (proxy: JsonRpcProxy<T>) => any,\n        readonly pipeManager: PipeManager\n    ) { }\n\n    onConnection(connection: MessageConnection): void {\n        const factory = new JsonRpcProxyFactory<T>(undefined, this.pipeManager);\n        const proxy = factory.createProxy();\n        factory.target = this.targetFactory(proxy);\n        factory.listen(connection);\n    }\n}\n\nexport class JsonRpcProxyFactory<T extends object> implements ProxyHandler<T> {\n\n    private static SET_CLIENT = 'setClient';\n    private static ON_DID_OPEN_CONNECTION = 'onDidOpenConnection';\n    private static ON_DID_CLOSE_CONNECTION = 'onDidCloseConnection';\n    private readonly onDidOpenConnectionEmitter = new Emitter<void>();\n    private readonly onDidCloseConnectionEmitter = new Emitter<void>();\n    protected internalMethods: Map<string, () => any>;\n\n    protected connectionPromiseResolve: (connection: MessageConnection) => void;\n    protected connectionPromise: Promise<MessageConnection>;\n\n    constructor(public target?: any, protected pipeMananger?: PipeManager) {\n        this.waitForConnection();\n    }\n\n    protected waitForConnection(): void {\n        this.connectionPromise = new Promise(resolve =>\n            this.connectionPromiseResolve = resolve\n        );\n        this.connectionPromise.then(connection => {\n            connection.onClose(() =>\n                this.onDidCloseConnectionEmitter.fire(undefined)\n            );\n            this.onDidOpenConnectionEmitter.fire(undefined);\n        });\n    }\n\n    protected registerMethods(connection: MessageConnection) {\n        if (this.target) {\n            for (const prop in this.target) {\n                if (typeof this.target[prop] === 'function') {\n                    connection.onRequest(prop, (...args) => this.onRequest(prop, ...args));\n                    connection.onNotification(prop, (...args) => this.onNotification(prop, ...args));\n                }\n            }\n        }\n    }\n\n    listen(connection: MessageConnection) {\n        this.registerMethods(connection);\n        connection.onDispose(() => this.waitForConnection());\n        connection.listen();\n        this.connectionPromiseResolve(connection);\n    }\n\n    protected async onRequest(method: string, ...args: any[]): Promise<any> {\n        try {\n            if (this.pipeMananger) {\n                await this.pipeMananger.apply({ target: this.target, method: method }, args);\n            }\n            return await this.target[method](...args);\n        } catch (error) {\n            const e = this.serializeError(error);\n            if (e instanceof ResponseError) {\n                throw e;\n            }\n            const reason = e.message || '';\n            const stack = e.stack || '';\n            console.error(`Request ${method} failed with error: ${reason}`, stack);\n            throw e;\n        }\n    }\n\n    protected onNotification(method: string, ...args: any[]): void {\n        this.target[method](...args);\n    }\n\n    createProxy(): JsonRpcProxy<T> {\n        const proxy = new Proxy<T>(this as any, this);\n        return proxy as any;\n    }\n\n    get(target: T, p: PropertyKey, receiver: any): any {\n        const method = this.getInternalMethod(p.toString());\n        if (method) {\n            return method;\n        }\n        return this.createProxyMethod(p.toString());\n    }\n\n    protected getInternalMethod(method: string) {\n        if (method === JsonRpcProxyFactory.SET_CLIENT) {\n            return  (client: any) => this.target = client;\n        }\n        if (method === JsonRpcProxyFactory.ON_DID_OPEN_CONNECTION) {\n            return this.onDidOpenConnectionEmitter.event;\n        }\n        if (method === JsonRpcProxyFactory.ON_DID_CLOSE_CONNECTION) {\n            return this.onDidCloseConnectionEmitter.event;\n        }\n    }\n\n    protected createProxyMethod(method: string) {\n        const isNotify = this.isNotification(method);\n        return async (...args: any[]) => {\n            const capturedError = new Error(`Request '${method}' failed`);\n            const connection =  await this.connectionPromise;\n            if (isNotify) {\n                connection.sendNotification(method, ...args);\n            } else {\n                try {\n                    return await connection.sendRequest(method, ...args) as Promise<any>;\n                } catch (err) {\n                    throw this.deserializeError(capturedError, err);\n                }\n            }\n        };\n    }\n\n    protected isNotification(p: PropertyKey): boolean {\n        return p.toString().startsWith('notify') || p.toString().startsWith('on');\n    }\n\n    protected serializeError(e: any): any {\n        if (ApplicationError.is(e)) {\n            return new ResponseError(e.code, '',\n                Object.assign({ kind: 'application' }, e.toJson())\n            );\n        }\n        return e;\n    }\n    protected deserializeError(capturedError: Error, e: any): any {\n        if (e instanceof ResponseError) {\n            const capturedStack = capturedError.stack || '';\n            if (e.data && e.data.kind === 'application') {\n                const { stack, data, message } = e.data;\n                return ApplicationError.fromJson(e.code, {\n                    message: message || capturedError.message,\n                    data,\n                    stack: `${capturedStack}\\nCaused by: ${stack}`\n                });\n            }\n            e.stack = capturedStack;\n        }\n        return e;\n    }\n\n}\n","import { DataCallback, PartialMessageInfo } from 'vscode-jsonrpc/lib/messageReader';\nimport { Channel } from './channel-protocol';\nimport { Emitter, Event } from 'vscode-jsonrpc/lib/events';\n\nexport abstract class AbstractMessageReader {\n\n    private errorEmitter: Emitter<Error>;\n    private closeEmitter: Emitter<void>;\n\n    private partialMessageEmitter: Emitter<PartialMessageInfo>;\n\n    constructor() {\n        this.errorEmitter = new Emitter<Error>();\n        this.closeEmitter = new Emitter<void>();\n        this.partialMessageEmitter = new Emitter<PartialMessageInfo>();\n    }\n\n    public dispose(): void {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n\n    public get onError(): Event<Error> {\n        return this.errorEmitter.event;\n    }\n\n    protected fireError(error: any): void {\n        this.errorEmitter.fire(this.asError(error));\n    }\n\n    public get onClose(): Event<void> {\n        return this.closeEmitter.event;\n    }\n\n    protected fireClose(): void {\n        this.closeEmitter.fire(undefined);\n    }\n\n    public get onPartialMessage(): Event<PartialMessageInfo> {\n        return this.partialMessageEmitter.event;\n    }\n\n    protected firePartialMessage(info: PartialMessageInfo): void {\n        this.partialMessageEmitter.fire(info);\n    }\n\n    private asError(error: any): Error {\n        if (error instanceof Error) {\n            return error;\n        } else {\n            return new Error(`Reader received error. Reason: ${typeof (error.message) === 'string' ? error.message : 'unknown'}`);\n        }\n    }\n}\n\nexport class ChannelMessageReader extends AbstractMessageReader {\n\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor(protected readonly channel: Channel) {\n        super();\n        this.channel.onMessage(message =>\n            this.readMessage(message)\n        );\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                }\n            }\n        }\n    }\n\n    protected readMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n}\n","import { Message } from 'vscode-jsonrpc/lib/messages';\nimport { } from 'vscode-jsonrpc/lib/messageWriter';\nimport { Channel } from './channel-protocol';\nimport { Emitter, Event } from 'vscode-jsonrpc/lib/events';\n\nexport abstract class AbstractMessageWriter {\n\n    private errorEmitter: Emitter<[Error, Message | undefined, number | undefined]>;\n    private closeEmitter: Emitter<void>;\n\n    constructor() {\n        this.errorEmitter = new Emitter<[Error, Message, number]>();\n        this.closeEmitter = new Emitter<void>();\n    }\n\n    public dispose(): void {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n\n    public get onError(): Event<[Error, Message | undefined, number | undefined]> {\n        return this.errorEmitter.event;\n    }\n\n    protected fireError(error: any, message?: Message, count?: number): void {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n\n    public get onClose(): Event<void> {\n        return this.closeEmitter.event;\n    }\n\n    protected fireClose(): void {\n        this.closeEmitter.fire(undefined);\n    }\n\n    private asError(error: any): Error {\n        if (error instanceof Error) {\n            return error;\n        } else {\n            return new Error(`Writer received error. Reason: ${typeof error.message === 'string' ? error.message : 'unknown'}`);\n        }\n    }\n}\n\nexport class ChannelMessageWriter extends AbstractMessageWriter {\n\n    protected errorCount = 0;\n\n    constructor(protected readonly channel: Channel) {\n        super();\n    }\n\n    write(msg: Message): void {\n        try {\n            const content = JSON.stringify(msg);\n            this.channel.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n\n}\n","import { Context, HttpError } from '@malagu/web/lib/node';\nimport { optional } from 'inversify';\nimport { ConnectionHandler, ConnnectionFactory, Channel } from '../../common';\nimport { Component, Autowired, ConsoleLogger } from '@malagu/core';\nimport { CURRENT_CHANNEL_STRATEGY_REQUEST_KEY, ChannelStrategy } from './channel-protocol';\n\n// tslint:disable:no-any\n@Component()\nexport class ChannelManager {\n\n    protected _handlers = new Map<string, ConnectionHandler>();\n\n    constructor(\n        @Autowired(ConnectionHandler) @optional()\n        protected readonly handlers: ConnectionHandler[],\n        @Autowired(ConnnectionFactory) protected connnectionFactory: ConnnectionFactory<Channel>\n    ) {\n        for (const handler of handlers) {\n            this._handlers.set(handler.path, handler);\n        }\n     }\n\n    async handleChannels(): Promise<void> {\n        const channelStrategy: ChannelStrategy = Context.getAttr(CURRENT_CHANNEL_STRATEGY_REQUEST_KEY);\n        await channelStrategy.handleChannels(async () => {\n            const { id, path } = (await channelStrategy.getMessage() as any);\n            if (path) {\n                const handler = this._handlers.get(this.getRealPath(path));\n                if (handler) {\n                    const channel = await channelStrategy.createChannel(id);\n                    handler.onConnection(this.connnectionFactory.create(channel, new ConsoleLogger()));\n                    return channel;\n                }\n            }\n            throw new HttpError(404, `Cannot find a service for the path: ${path}`);\n        });\n    }\n\n    protected getRealPath(path: string): string {\n        return <string>path.split(':').pop();\n    }\n\n}\n","import { Middleware, Context } from '@malagu/web/lib/node';\nimport { Component, Autowired } from '@malagu/core';\nimport { ChannelStrategy, CHANNEL_MIDDLEWARE_PRIORITY, CURRENT_CHANNEL_STRATEGY_REQUEST_KEY } from './channel-protocol';\n\n@Component(Middleware)\nexport class ChannelMiddleware implements Middleware {\n\n    @Autowired(ChannelStrategy)\n    protected readonly channelStrategies: ChannelStrategy[];\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        for (const channelStrategy of this.channelStrategies) {\n            if (await channelStrategy.support()) {\n                Context.setAttr(CURRENT_CHANNEL_STRATEGY_REQUEST_KEY, channelStrategy);\n                break;\n            }\n        }\n\n        ctx.response.setHeader('Content-Type', 'application/json;charset=utf8');\n\n        await next();\n    }\n\n    readonly priority = CHANNEL_MIDDLEWARE_PRIORITY;\n\n}\n","import { Channel } from '../../common';\n\nexport const ChannelStrategy = Symbol('ChannelStrategy');\n\nexport const CHANNEL_MIDDLEWARE_PRIORITY = 2100;\n\nexport const CURRENT_CHANNEL_STRATEGY_REQUEST_KEY = 'CurrentChannelStrategyRequest';\n\nexport interface ChannelStrategy {\n\n    getMessage(): Promise<Channel.Message>;\n\n    handleMessage(message: any): Promise<void>;\n\n    createChannel(id: number): Promise<Channel>\n\n    handleChannels(channelFactory: () => Promise<Channel>): Promise<void>;\n\n    support(): Promise<boolean>;\n\n}\n","import { Channel, HttpChannel } from '../../common/jsonrpc';\nimport { ChannelStrategy } from './channel-protocol';\nimport { Component, Deferred } from '@malagu/core';\nimport { Context, HttpContext } from '@malagu/web/lib/node';\n\n@Component(ChannelStrategy)\nexport class HttpChannelStrategy implements ChannelStrategy {\n    getMessage(): Promise<Channel.Message> {\n        return Context.getRequest().body;\n    }\n\n    async createChannel(id: number): Promise<Channel> {\n        return new HttpChannel(id, async content => {\n            this.handleMessage(content);\n        });\n    }\n\n    async handleChannels(channelFactory: () => Promise<Channel>): Promise<void> {\n        const channel = await channelFactory();\n        channel.handleMessage(await this.getMessage());\n        Context.getResponse().body = new Deferred<any>();\n    }\n\n    async handleMessage(message: string): Promise<void> {\n        const deferred = Context.getResponse().body;\n        deferred.resolve(message);\n    }\n\n    async support(): Promise<boolean> {\n        return Context.getCurrent() instanceof HttpContext;\n    }\n\n}\n","export * from './channel-manager';\nexport * from './channel-protocol';\nexport * from './channel-strategy';\nexport * from './channel-middleware';\n","import { Component, Autowired, Value } from '@malagu/core';\nimport { ChannelManager } from '../channel';\nimport { RPC_HANDLER_ADAPTER_PRIORITY } from './handler-protocol';\nimport { RequestMatcher, HandlerAdapter } from '@malagu/web/lib/node';\nimport { PathResolver } from '@malagu/web';\nimport { RPC_PATH } from '../../common';\n\nexport const PATH_PARMAS_ATTR = 'pathParams';\n\n@Component(HandlerAdapter)\nexport class RpcHandlerAdapter implements HandlerAdapter {\n    readonly priority = RPC_HANDLER_ADAPTER_PRIORITY;\n\n    @Autowired\n    protected readonly channelManager: ChannelManager;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    @Autowired(PathResolver)\n    protected readonly pathResolver: PathResolver;\n\n    @Value(RPC_PATH)\n    protected readonly rpcPath: string;\n\n    handle(): Promise<void> {\n        return this.channelManager.handleChannels();\n    }\n\n    async canHandle(): Promise<boolean> {\n        return this.requestMatcher.match(await this.pathResolver.resolve(this.rpcPath));\n    }\n\n}\n","export const RPC_HANDLER_ADAPTER_PRIORITY = 2000;\n","export * from './handler-adapter';\nexport * from './handler-protocol';\n","export * from './channel';\nexport * from './handler';\n","import '../common';\nimport { autoBind } from '@malagu/core';\nimport '.';\n\nexport default autoBind();\n","import { AccessDecisionManager, SecurityMetadata, AccessDecisionVoter, ACCESS_DENIED, ACCESS_GRANTED } from './access-protocol';\nimport { Component, Prioritizeable, Autowired } from '@malagu/core';\nimport { AccessDeniedError } from '../error';\n\n@Component(AccessDecisionManager)\nexport class AccessDecisionManagerImpl implements AccessDecisionManager {\n\n    protected prioritized: AccessDecisionVoter[];\n\n    constructor(\n        @Autowired(AccessDecisionVoter)\n        protected readonly accessDecisionVoters: AccessDecisionVoter[]\n    ) {\n        this.prioritized = Prioritizeable.prioritizeAllSync(this.accessDecisionVoters).map(c => c.value);\n    }\n\n    async decide(securityMetadata: SecurityMetadata): Promise<void> {\n        let grant = 0;\n        for (const voter of this.prioritized) {\n            if (await voter.support(securityMetadata)) {\n                const result = await voter.vote(securityMetadata);\n                if (result === ACCESS_DENIED) {\n                    throw new AccessDeniedError('Access is denied');\n                } else if (result === ACCESS_GRANTED) {\n                    grant++;\n                }\n            }\n        }\n        if (grant <= 0) {\n            throw new AccessDeniedError('Access is denied');\n        }\n    }\n\n}\n","import { SecurityMetadata, AccessDecisionVoter, ACCESS_DENIED, ACCESS_GRANTED,\n    POLICY_BASED_VOTER_PRIORITY, PolicyResolver, PrincipalPolicyProvider, ResourcePolicyProvider } from './access-protocol';\nimport { Component, Autowired } from '@malagu/core';\nimport { AuthorizeType } from '../annotation';\n\n@Component(AccessDecisionVoter)\nexport class PolicyBasedVoter implements AccessDecisionVoter {\n\n    readonly priority = POLICY_BASED_VOTER_PRIORITY;\n\n    @Autowired(PolicyResolver)\n    protected readonly policyResolvers: PolicyResolver[];\n\n    @Autowired(ResourcePolicyProvider)\n    protected readonly resourcePolicyProvider: ResourcePolicyProvider;\n\n    @Autowired(PrincipalPolicyProvider)\n    protected readonly principalPolicyProvider: PrincipalPolicyProvider;\n\n    async vote(securityMetadata: SecurityMetadata): Promise<number> {\n\n        const principalPolicies = await this.principalPolicyProvider.provide(securityMetadata.principal, securityMetadata.authorizeType);\n        const resourcePolicies = await this.resourcePolicyProvider.provide(securityMetadata.resource, securityMetadata.authorizeType);\n        const policies = [ ...principalPolicies, ...resourcePolicies, ...securityMetadata.policies ];\n        let grant = 0;\n        for (const policy of policies) {\n            for (const policyResolver of this.policyResolvers) {\n                if (await policyResolver.support(policy)) {\n                    if (await policyResolver.resolve(policy, securityMetadata)) {\n                        grant++;\n                    } else {\n                        return ACCESS_DENIED;\n                    }\n                }\n            }\n        }\n        if (securityMetadata.authorizeType === AuthorizeType.Post || grant > 0) {\n            return ACCESS_GRANTED;\n        }\n        return ACCESS_DENIED;\n    }\n\n    async support(securityMetadata: SecurityMetadata): Promise<boolean> {\n        return true;\n    }\n\n}\n","import { AuthorizeType } from '../annotation/authorize';\n\nexport const AccessDecisionManager = Symbol('AccessDecisionManager');\nexport const AccessDecisionVoter = Symbol('AccessDecisionVoter');\nexport const SecurityMetadataSource = Symbol('SecurityMetadataSource');\nexport const PolicyResolver = Symbol('PolicyResolver');\nexport const SecurityExpressionContextHandler = Symbol('SecurityExpressionContextHandler');\nexport const ResourcePolicyProvider = Symbol('ResourcePolicyProvider');\nexport const PrincipalPolicyProvider = Symbol('PrincipalPolicyProvider');\nexport const PolicyFactory = Symbol('PolicyFactory');\n\nexport const SECURITY_EXPRESSION_CONTEXT_KEY = 'SecurityExpressionContext';\n\nexport const ACCESS_GRANTED = 1;\nexport const ACCESS_ABSTAIN = 0;\nexport const ACCESS_DENIED = -1;\n\nexport const POLICY_BASED_VOTER_PRIORITY = 2000;\n\nexport enum PolicyType {\n    El= 'el'\n}\n\nexport interface Policy {\n    type: PolicyType | string\n    authorizeType: AuthorizeType;\n    [key: string]: any;\n}\n\nexport interface ResourcePolicyProvider {\n    provide(resource: string, type: AuthorizeType): Promise<Policy[]>;\n}\n\nexport interface PrincipalPolicyProvider {\n    provide(principal: any, type: AuthorizeType): Promise<Policy[]>;\n}\n\nexport interface PolicyFactory {\n    create(options: any): Promise<Policy>;\n    support(options: any): Promise<boolean>;\n}\n\nexport interface PolicyResolver<> {\n    resolve(policy: Policy, securityMetadata: SecurityMetadata): Promise<boolean>;\n    support(policy: Policy): Promise<boolean>;\n}\n\nexport interface ElPolicy extends Policy {\n    context: any;\n    el: string;\n}\n\nexport interface SecurityExpressionContextHandler {\n    handle(context: any): Promise<void>\n}\n\nexport interface SecurityMetadata {\n    authorizeType: AuthorizeType;\n    action: string;\n    resource: string;\n    principal: any;\n    policies: Policy[];\n}\n\nexport interface SecurityMetadataContext {\n}\n\nexport interface MethodSecurityMetadataContext extends SecurityMetadataContext {\n    authorizeType: AuthorizeType\n    method: string;\n    args: any[];\n    target: any;\n    returnValue?: any\n\n}\n\nexport interface SecurityMetadataSource {\n    load(context: SecurityMetadataContext): Promise<SecurityMetadata>;\n}\n\nexport interface AccessDecisionManager {\n    decide(securityMetadata: SecurityMetadata): Promise<void>;\n}\n\nexport interface AccessDecisionVoter {\n    vote(securityMetadata: SecurityMetadata): Promise<number>;\n    support(securityMetadata: SecurityMetadata): Promise<boolean>;\n    readonly priority: number;\n}\n","export * from './access-decision-manager';\nexport * from './access-protocol';\nexport * from './access-decision-voter';\nexport * from './method-advice';\nexport * from './policy-provider';\nexport * from './policy-resolver';\nexport * from './security-metadata-source';\n","import { MethodBeforeAdvice, Autowired, Component, AfterReturningAdvice, Value } from '@malagu/core';\nimport { AccessDecisionManager, SecurityMetadataSource } from './access-protocol';\nimport { AuthorizeType } from '../annotation/authorize';\n\n@Component(MethodBeforeAdvice)\nexport class SecurityMethodBeforeAdivice implements MethodBeforeAdvice {\n\n    @Autowired(AccessDecisionManager)\n    protected readonly accessDecisionManager: AccessDecisionManager;\n\n    @Autowired(SecurityMetadataSource)\n    protected readonly securityMetadataSource: SecurityMetadataSource;\n\n    @Value('malagu.security.enabled')\n    protected readonly enabled: boolean;\n\n    async before(method: string | number | symbol, args: any[], target: any): Promise<void> {\n        if (this.enabled !== true) {\n            return;\n        }\n        if (typeof method !== 'string') {\n            return;\n        }\n        const securityMetadata = await this.securityMetadataSource.load({ method, args, target, authorizeType: AuthorizeType.Pre });\n        await this.accessDecisionManager.decide(securityMetadata);\n    }\n\n}\n\n@Component(AfterReturningAdvice)\nexport class SecurityAfterReturningAdvice implements AfterReturningAdvice {\n\n    @Autowired(AccessDecisionManager)\n    protected readonly accessDecisionManager: AccessDecisionManager;\n\n    @Autowired(SecurityMetadataSource)\n    protected readonly securityMetadataSource: SecurityMetadataSource;\n\n    async afterReturning(returnValue: any, method: string | number | symbol, args: any[], target: any): Promise<void> {\n        if (typeof method !== 'string') {\n            return;\n        }\n        const securityMetadata = await this.securityMetadataSource.load({ method, args, target, returnValue, authorizeType: AuthorizeType.Post });\n        await this.accessDecisionManager.decide(securityMetadata);\n    }\n\n}\n","import { Policy, PrincipalPolicyProvider, ResourcePolicyProvider } from './access-protocol';\nimport { Component, Value } from '@malagu/core';\nimport { postConstruct } from 'inversify';\nimport { AuthorizeType } from '../annotation';\n\n@Component(PrincipalPolicyProvider)\nexport class PrincipalPolicyProviderImpl implements PrincipalPolicyProvider {\n\n    async provide(principal: any, type: AuthorizeType): Promise<Policy[]> {\n        const policies: Policy[] = principal && principal.policies || [];\n        return policies.filter(p => p.authorizeType === type);\n    }\n}\n\n@Component(ResourcePolicyProvider)\nexport class ResourcePolicyProviderImpl implements ResourcePolicyProvider {\n\n    @Value('malagu.security.policies')\n    protected readonly policies?: any;\n\n    protected readonly policyMap: Map<string, Map<string, Policy[]>> = new Map<string, Map<string, Policy[]>>();\n\n    @postConstruct()\n    protected async init(): Promise<void> {\n        if (this.policies) {\n            for (const resource of Object.keys(this.policies)) {\n                for (const options of this.policies[resource]) {\n                    let opts = options;\n                    if (!Array.isArray(options)) {\n                        opts = [ options ];\n                    }\n                    const preResult: Policy[] = [];\n                    const postResult: Policy[] = [];\n                    const result = new Map<string, Policy[]>();\n                    for (const opt of opts) {\n                        if (!opt.type || opt.type === AuthorizeType.Pre) {\n                            preResult.push(opt);\n                        } else if (opt.type === AuthorizeType.Post) {\n                            postResult.push(opt);\n                        }\n                        result.set(AuthorizeType.Pre, preResult);\n                        result.set(AuthorizeType.Post, postResult);\n                    }\n                    this.policyMap.set(resource, result);\n                }\n            }\n        }\n    }\n\n    async provide(resource: string, type: AuthorizeType): Promise<Policy[]> {\n        const result = this.policyMap.get(resource);\n        return result && result.get(type) || [];\n    }\n}\n","import { Policy, ElPolicy, PolicyResolver, SecurityMetadata, PolicyType, SECURITY_EXPRESSION_CONTEXT_KEY } from './access-protocol';\nimport { evalSync } from 'jexl';\nimport { Component } from '@malagu/core';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(PolicyResolver)\nexport class ElPolicyResolver implements PolicyResolver {\n\n    async resolve(policy: ElPolicy, securityMetadata: SecurityMetadata): Promise<boolean> {\n        return await evalSync(policy.el, policy.context || Context.getAttr(SECURITY_EXPRESSION_CONTEXT_KEY));\n\n    }\n\n    async support(policy: Policy): Promise<boolean> {\n        return policy.type === PolicyType.El;\n    }\n}\n","import { Component, Autowired, Optional, getOwnMetadata } from '@malagu/core';\nimport {\n    SecurityMetadataSource, SecurityMetadata, MethodSecurityMetadataContext,\n    SecurityExpressionContextHandler, SECURITY_EXPRESSION_CONTEXT_KEY, Policy\n} from './access-protocol';\nimport { SecurityContext } from '../context';\nimport { METADATA_KEY } from '../constants';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(SecurityMetadataSource)\nexport class MethodSecurityMetadataSource implements SecurityMetadataSource {\n\n    @Autowired(SecurityExpressionContextHandler) @Optional\n    protected readonly securityExpressionContextHandler: SecurityExpressionContextHandler;\n\n    async load(context: MethodSecurityMetadataContext): Promise<SecurityMetadata> {\n        const classPolicies: Policy[] = getOwnMetadata(METADATA_KEY.authorize, context.target.constructor);\n        const methodPolicies: Policy[] = getOwnMetadata(METADATA_KEY.authorize, context.target.constructor, context.method);\n        const ctx = {\n            ...context,\n            ...SecurityContext.getAuthentication()\n        };\n        if (this.securityExpressionContextHandler) {\n            await this.securityExpressionContextHandler.handle(ctx);\n        }\n        Context.setAttr(SECURITY_EXPRESSION_CONTEXT_KEY, ctx);\n        const policies = classPolicies.concat(...methodPolicies)\n            .filter(item => item.authorizeType === context.authorizeType);\n\n        const resource = context.target.name;\n        return {\n            authorizeType: context.authorizeType,\n            principal: SecurityContext.getAuthentication().principal,\n            action: context.method,\n            resource,\n            policies: policies\n        };\n    }\n}\n","import { Authorize, AuthorizeType } from './authorize';\n\nexport const Anonymous = function (): any {\n    return Authorize({ el: 'true', authorizeType: AuthorizeType.Pre });\n};\n","import { Authorize, AuthorizeType } from './authorize';\n\nexport const Authenticated = function () {\n    return Authorize({ el: 'authenticated', authorizeType: AuthorizeType.Pre });\n};\n","import { METADATA_KEY } from '../constants';\nimport { Policy, PolicyType } from '../access';\n\nexport enum AuthorizeType {\n    Pre= 'Pre', Post= 'Post'\n}\n\nexport interface ElOption {\n    el: string;\n    authorizeType: AuthorizeType;\n}\n\nexport namespace ElOption {\n    export function is(option: any): option is ElOption {\n        return option && (option.el !== undefined || option.authorizeType);\n    }\n}\n\nexport const Authorize = function (elOrElOptionOrPolicy: string | ElOption | Policy) {\n    const policy = getPolicy(elOrElOptionOrPolicy);\n    return (target: any, targetKey?: string, descriptor?: TypedPropertyDescriptor<Function>) => {\n        if (targetKey) {\n            const policies: Policy[] = Reflect.getOwnMetadata(METADATA_KEY.authorize, target.constructor, targetKey) || [];\n            policies.push(policy);\n            Reflect.defineMetadata(METADATA_KEY.authorize, policies, target.constructor, targetKey);\n        } else {\n            const policies: Policy[] = Reflect.getOwnMetadata(METADATA_KEY.authorize, target.constructor) || [];\n            policies.push(policy);\n            Reflect.defineMetadata(METADATA_KEY.authorize, policies, target);\n        }\n    };\n\n};\n\nexport function getPolicy(elOrElOptionOrPolicy: string | ElOption | Policy) {\n    let policy: Policy;\n    if (typeof elOrElOptionOrPolicy === 'string') {\n        policy = { authorizeType: AuthorizeType.Pre, el: elOrElOptionOrPolicy, type: PolicyType.El };\n    } else {\n        policy = { authorizeType: AuthorizeType.Pre, type: PolicyType.El, ...elOrElOptionOrPolicy};\n    }\n    return policy;\n}\n","export * from './anonymous';\nexport * from './authenticated';\nexport * from './authorize';\nexport * from './post-authorize';\nexport * from './pre-authorize';\n","import { Authorize, AuthorizeType } from './authorize';\n\nexport const PostAuthorize = function (el: string) {\n    return Authorize({ el, authorizeType: AuthorizeType.Post });\n};\n","import { Authorize, AuthorizeType } from './authorize';\n\nexport const PreAuthorize = function (el: string) {\n    return Authorize({ el, authorizeType: AuthorizeType.Pre });\n};\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { AuthenticationProvider, AuthenticationManager, Authentication } from './authentication-protocol';\nimport { AccountStatusError, AuthenticationError } from '../error';\nimport { SecurityContext } from '../context';\nimport { postConstruct } from 'inversify';\n\n@Component(AuthenticationManager)\nexport class AuthenticationManagerImpl implements AuthenticationManager {\n\n    protected prioritized: AuthenticationProvider[];\n\n    @Autowired(AuthenticationProvider)\n    protected readonly authenticationProviders: AuthenticationProvider[];\n\n    @postConstruct()\n    async init() {\n        this.prioritized = Prioritizeable.prioritizeAllSync(this.authenticationProviders).map(c => c.value);\n    }\n\n    async authenticate(): Promise<void> {\n        let result: Authentication | undefined;\n        let lastError: any;\n        for (const authenticationProvider of this.prioritized) {\n            try {\n                if (await authenticationProvider.support()) {\n                    result = await authenticationProvider.authenticate();\n                    if (result) {\n                        SecurityContext.setAuthentication(result);\n                        return;\n                    }\n                }\n            } catch (error) {\n                if (error instanceof AccountStatusError) {\n                    throw error;\n                } else if (error instanceof AuthenticationError) {\n                    lastError = error;\n                }\n            }\n        }\n        if (lastError) {\n           throw lastError;\n        }\n    }\n\n    async support(): Promise<boolean> {\n        for (const authenticationProvider of this.prioritized) {\n            if (await authenticationProvider.support()) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import { Middleware, Context } from '@malagu/web/lib/node';\nimport { Component, Autowired } from '@malagu/core';\nimport { AuthenticationManager, AUTHENTICATION_MIDDLEWARE_PRIORITY } from './authentication-protocol';\n\n@Component(Middleware)\nexport class AuthenticationMiddleWare implements Middleware {\n\n    @Autowired(AuthenticationManager)\n    protected readonly authenticationManager: AuthenticationManager;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        if (await this.authenticationManager.support()) {\n            await this.authenticationManager.authenticate();\n            return;\n        }\n        await next();\n    }\n\n    readonly priority: number = AUTHENTICATION_MIDDLEWARE_PRIORITY;\n\n}\n","import { SECURITY_CONTEXT_MIDDLEWARE_PRIORITY } from '../context';\nimport { Policy } from '../access';\n\nexport const AuthenticationProvider = Symbol('AuthenticationProvider');\nexport const AuthenticationManager = Symbol('AuthenticationManager');\n\nexport const AUTHENTICATION_MIDDLEWARE_PRIORITY = SECURITY_CONTEXT_MIDDLEWARE_PRIORITY - 100;\nexport const DEFAULT_AUTHENTICATION_PROVIDER__PRIORITY =  2000;\n\nexport interface AuthenticationManager {\n    authenticate(): Promise<void>;\n    support(): Promise<boolean>;\n}\n\nexport interface AuthenticationProvider {\n    readonly priority: number;\n    authenticate(): Promise<Authentication>;\n    support(): Promise<boolean>;\n}\n\nexport interface Authentication {\n    policies: Policy[];\n    credentials: any;\n    details?: any;\n    principal: any;\n    authenticated: boolean;\n}\n","import { Component, Autowired, Value } from '@malagu/core';\nimport { AuthenticationProvider, Authentication, DEFAULT_AUTHENTICATION_PROVIDER__PRIORITY } from './authentication-protocol';\nimport { Context, RequestMatcher } from '@malagu/web/lib/node';\nimport { PasswordEncoder } from '../crypto';\nimport { UserStore, UserChecker } from '../user';\nimport { BadCredentialsError } from '../error';\n\n@Component(AuthenticationProvider)\nexport class AuthenticationProviderImpl implements AuthenticationProvider {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    @Autowired(PasswordEncoder)\n    protected readonly passwordEncoder: PasswordEncoder;\n\n    @Autowired(UserStore)\n    protected readonly userStore: UserStore;\n\n    @Autowired(UserChecker)\n    protected readonly userChecker: UserChecker;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    priority = DEFAULT_AUTHENTICATION_PROVIDER__PRIORITY;\n\n    async authenticate(): Promise<Authentication> {\n        const username = this.doGetValue(this.options.usernameKey);\n        const password = this.doGetValue(this.options.passwordKey);\n        if (!password || !username) {\n            throw new BadCredentialsError('Bad credentials');\n        }\n        const user = await this.userStore.load(username);\n        await this.userChecker.check(user);\n        if (!await this.passwordEncoder.matches(password, user.password)) {\n            throw new BadCredentialsError('Bad credentials');\n        }\n\n        Context.getResponse().statusCode = 302;\n        Context.getResponse().setHeader('Location', this.options.loginSuccessUrl);\n\n        return {\n            principal: user,\n            credentials: '',\n            policies: user.policies,\n            authenticated: true\n        };\n\n    }\n\n    protected doGetValue(key: string): string {\n        const request = Context.getRequest();\n        if (request.body) {\n            return request.body[key];\n        } else {\n            return request.query[key];\n        }\n    }\n\n    async support(): Promise<boolean> {\n       return !!await this.requestMatcher.match(this.options.loginUrl, this.options.loginMethod);\n    }\n\n}\n","export * from './authentication-protocol';\nexport * from './authentication-manager';\nexport * from './authentication-provider';\nexport * from './authentication-middleware';\n","export const METADATA_KEY = {\n    authorize: 'malagu:authorize',\n};\n","import { Context, AttributeScope } from '@malagu/web/lib/node';\nimport { Authentication } from '../authentication';\nimport { SESSION_MIDDLEWARE_PRIORITY } from '@malagu/web/lib/node/session/session-protocol';\n\nexport const SECURITY_CONTEXT_MIDDLEWARE_PRIORITY = SESSION_MIDDLEWARE_PRIORITY - 100;\nexport const CURRENT_SECURITY_CONTEXT_REQUEST_KEY = 'CurrentSecurityContextRequest';\n\nexport const SecurityContextStore = Symbol('SecurityContextStore');\nexport const SecurityContextStrategy = Symbol('SecurityContextStrategy');\n\nexport interface SecurityContext {\n    authentication: Authentication;\n}\n\nexport interface SecurityContextStore {\n    load(): Promise<SecurityContext>;\n    save(context: SecurityContext): Promise<void>;\n}\n\nexport interface SecurityContextStrategy {\n    create(): Promise<SecurityContext>;\n}\n\nexport namespace SecurityContext {\n\n    export function setCurrent(context: SecurityContext | undefined ) {\n        Context.setAttr(CURRENT_SECURITY_CONTEXT_REQUEST_KEY, context);\n    }\n\n    export function getCurrent<T extends SecurityContext>(): T {\n        return Context.getAttr(CURRENT_SECURITY_CONTEXT_REQUEST_KEY, AttributeScope.Request);\n    }\n\n    export function getAuthentication(): Authentication {\n        return getCurrent().authentication;\n    }\n\n    export function setAuthentication(authentication: Authentication): void {\n        getCurrent().authentication = authentication;\n    }\n\n}\n","export * from './context-protocol';\nexport * from './security-context-middleware';\nexport * from './security-context-store';\nexport * from './security-context-strategy';\n","import { Middleware, Context } from '@malagu/web/lib/node';\nimport { Component, Value, Autowired } from '@malagu/core';\nimport { SecurityContextStore, SecurityContext, SECURITY_CONTEXT_MIDDLEWARE_PRIORITY } from './context-protocol';\n\n@Component(Middleware)\nexport class SecurityContextMiddleWare implements Middleware {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    @Autowired(SecurityContextStore)\n    protected readonly securityContextStore: SecurityContextStore;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n\n        const context = await this.securityContextStore.load();\n        try {\n            SecurityContext.setCurrent(context);\n            await next();\n        } finally {\n            await this.securityContextStore.save(SecurityContext.getCurrent());\n        }\n    }\n\n    readonly priority: number = SECURITY_CONTEXT_MIDDLEWARE_PRIORITY;\n\n}\n","import { Component, Value, Autowired } from '@malagu/core';\nimport { SecurityContextStore, SecurityContext, SecurityContextStrategy } from './context-protocol';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(SecurityContextStore)\nexport class SessionSecurityContextStore implements SecurityContextStore {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    @Autowired(SecurityContextStrategy)\n    protected readonly securityContextStrategy: SecurityContextStrategy;\n\n    async load(): Promise<SecurityContext> {\n        const context = Context.getSession()[this.options.contextKey];\n        if (!context) {\n            return await this.securityContextStrategy.create();\n        }\n        return context;\n    }\n    async save(context: SecurityContext): Promise<void> {\n        Context.getSession()[this.options.contextKey] = context;\n    }\n\n}\n","import { Component } from '@malagu/core';\nimport { SecurityContext, SecurityContextStrategy } from './context-protocol';\nimport { Authentication } from '../authentication';\n\nexport class SecurityContextImpl implements SecurityContext {\n    authentication: Authentication;\n}\n\n@Component(SecurityContextStrategy)\nexport class SessionSecurityContextStrategy implements SecurityContextStrategy {\n\n    create(): Promise<SecurityContext> {\n        const securityContext = new SecurityContextImpl();\n        securityContext.authentication = {\n            principal: 'anonymousUser',\n            policies: [],\n            credentials: '',\n            authenticated: false\n        };\n        return Promise.resolve(securityContext);\n    }\n\n}\n","export const PasswordEncoder = Symbol('PasswordEncoder');\n\nexport interface PasswordEncoder {\n    encode(rawPassword: string): Promise<string>;\n    matches(rawPassword: string, encodedPassword: string): Promise<boolean>;\n}\n","export * from './crypto-protocol';\nexport * from './password-encoder';\n","import { PasswordEncoder } from './crypto-protocol';\nimport { PBKDF2, lib, enc} from 'crypto-js';\nimport { Value, Component } from '@malagu/core';\n\n@Component(PasswordEncoder)\nexport class Pbkdf2PasswordEncoder implements PasswordEncoder {\n\n    @Value('malagu.security.passwordEncoder')\n    protected readonly options: any;\n\n    async encode(rawPassword: string): Promise<string> {\n        const { encodeHashAsBase64 } = this.options;\n        const salt = lib.WordArray.random(8);\n        const encoded = this.doEncode(rawPassword, salt);\n        if (encodeHashAsBase64) {\n            return enc.Base64.stringify(enc.Utf8.parse(encoded));\n        }\n        return encoded;\n    }\n\n    protected doEncode(rawPassword: string, salt: string): string {\n        const { secret } = this.options;\n        return salt + PBKDF2(rawPassword, salt + secret, this.options).toString();\n    }\n\n    async matches(rawPassword: string, encodedPassword: string): Promise<boolean> {\n        const digested = this.doDecode(encodedPassword);\n        const salt = digested.substring(0, 16);\n        return digested === this.doEncode(rawPassword, salt);\n    }\n\n    protected doDecode(encoded: string): string {\n        const { encodeHashAsBase64 } = this.options;\n        if (encodeHashAsBase64) {\n            return enc.Base64.parse(encoded).toString(enc.Utf8);\n        }\n        return encoded;\n    }\n}\n","import { AUTHENTICATION_ERROR_HANDlER_PRIORITY, ACCESS_DENIED_ERROR_HANDlER_PRIORITY } from './error-protocol';\nimport { AuthenticationError, AccessDeniedError } from './error';\nimport { ErrorHandler, Context } from '@malagu/web/lib/node';\nimport { Component, Value, Autowired } from '@malagu/core';\nimport { SecurityContext } from '../context';\nimport { X_REQUESTED_WITH, XML_HTTP_REQUEST } from '@malagu/web/lib/node';\n\n@Component([AuthenticationErrorHandler, ErrorHandler])\nexport class AuthenticationErrorHandler implements ErrorHandler {\n    readonly priority: number = AUTHENTICATION_ERROR_HANDlER_PRIORITY;\n\n    @Value('malagu.security.basic.realm')\n    protected realm: string;\n\n    @Value('malagu.security.loginPage')\n    protected loginPage: string;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof AuthenticationError);\n    }\n\n    async handle(ctx: Context, err: AuthenticationError): Promise<void> {\n        if (ctx.request.headers[X_REQUESTED_WITH] === XML_HTTP_REQUEST) {\n            ctx.response.statusCode = 401;\n            ctx.response.setHeader('WWW-Authenticate', `Basic realm=\"${this.realm}\"`);\n            ctx.response.end(err.message);\n        } else {\n            ctx.response.statusCode = 302;\n            ctx.response.setHeader('Location', this.loginPage);\n            ctx.response.end(err.message);\n        }\n    }\n}\n\n@Component(ErrorHandler)\nexport class AccessDeniedErrorHandler implements ErrorHandler {\n    readonly priority: number = ACCESS_DENIED_ERROR_HANDlER_PRIORITY;\n\n    @Autowired(AuthenticationErrorHandler)\n    protected readonly authenticationErrorHandler: AuthenticationErrorHandler;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof AccessDeniedError);\n    }\n\n    async handle(ctx: Context, err: AccessDeniedError): Promise<void> {\n        if (SecurityContext.getAuthentication().authenticated) {\n            ctx.response.statusCode = 403;\n            ctx.response.end(err.message);\n        } else {\n            await this.authenticationErrorHandler.handle(ctx, new AuthenticationError());\n        }\n    }\n}\n","import { HTTP_ERROR_HANDlER_PRIORITY } from '@malagu/web/lib/node';\n\nexport const ACCESS_DENIED_ERROR_HANDlER_PRIORITY = HTTP_ERROR_HANDlER_PRIORITY + 100;\n\nexport const AUTHENTICATION_ERROR_HANDlER_PRIORITY = ACCESS_DENIED_ERROR_HANDlER_PRIORITY + 100;\n","import { CustomError } from '@malagu/core';\n\nexport class AuthenticationError extends CustomError {\n\n    constructor(message?: string) {\n        super(message);\n    }\n\n}\n\nexport class AccountStatusError extends AuthenticationError {\n\n}\n\nexport class UsernameNotFoundError extends AuthenticationError {\n\n}\n\nexport class BadCredentialsError extends AuthenticationError {\n\n}\n\nexport class LockedError extends AccountStatusError {\n\n}\n\nexport class DisabledError extends AccountStatusError {\n\n}\n\nexport class AccountExpiredError extends AccountStatusError {\n\n}\n\nexport class CredentialsExpiredError extends AccountStatusError {\n\n}\n\nexport class AccessDeniedError extends CustomError {\n\n}\n","export * from './error';\nexport * from './error-hander';\nexport * from './error-protocol';\n","export * from './authentication';\nexport * from './context';\nexport * from './crypto';\nexport * from './error';\nexport * from './user';\nexport * from './access';\nexport * from './annotation';\nexport * from './constants';\nexport * from './logout';\n","export * from './logout-protocol';\nexport * from './logout-middleware';\nexport * from './logout-handler';\nexport * from './logout-success-handler';\n","import { LogoutHandler } from './logout-protocol';\nimport { Component } from '@malagu/core';\nimport { SecurityContext } from '../context';\n\n@Component(LogoutHandler)\nexport class SecurityContextLogoutHandler implements LogoutHandler {\n\n    async logout(): Promise<void> {\n        SecurityContext.setCurrent(undefined);\n    }\n\n}\n","import { Middleware, Context, RequestMatcher } from '@malagu/web/lib/node';\nimport { Component, Autowired, Value } from '@malagu/core';\nimport { LogoutHandler, LOGOUT_MIDDLEWARE_PRIORITY } from './logout-protocol';\nimport { LogoutSuccessHandlerProvider } from './logout-success-handler-provider';\n\n@Component(Middleware)\nexport class LogoutMiddleWare implements Middleware {\n\n    @Autowired(LogoutHandler)\n    protected readonly logoutHandlers: LogoutHandler[];\n\n    @Autowired(LogoutSuccessHandlerProvider)\n    protected readonly logoutSuccessHandlerProvider: LogoutSuccessHandlerProvider;\n\n    @Value('malagu.security.logoutUrl')\n    protected readonly logoutUrl: string;\n\n    @Value('malagu.security.logoutMethod')\n    protected readonly logoutMethod: string;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        if (await this.requiresLogout()) {\n            for (const logoutHandler of this.logoutHandlers) {\n                await logoutHandler.logout();\n            }\n\n            for (const logoutSuccessHandler of this.logoutSuccessHandlerProvider.provide()) {\n                await logoutSuccessHandler.onLogoutSuccess();\n            }\n            return;\n        }\n\n        await next();\n    }\n\n    protected async requiresLogout(): Promise<boolean> {\n        return !!await this.requestMatcher.match(this.logoutUrl, this.logoutMethod);\n    }\n\n    readonly priority: number = LOGOUT_MIDDLEWARE_PRIORITY;\n\n}\n","import { SECURITY_CONTEXT_MIDDLEWARE_PRIORITY } from '../context';\n\nexport const LogoutHandler = Symbol('LogoutHandler');\nexport const LogoutSuccessHandler = Symbol('LogoutSuccessHandler');\n\nexport const LOGOUT_MIDDLEWARE_PRIORITY = SECURITY_CONTEXT_MIDDLEWARE_PRIORITY - 50;\n\nexport const LOGOUT_SUCCESS_HANDLER_PRIORITY =  2000;\n\nexport interface LogoutHandler {\n    logout(): Promise<void>;\n}\n\nexport interface LogoutSuccessHandler {\n    readonly priority: number;\n    onLogoutSuccess(): Promise<void>;\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { LogoutSuccessHandler } from './logout-protocol';\n\n@Component()\nexport class LogoutSuccessHandlerProvider {\n\n    protected prioritized: LogoutSuccessHandler[];\n\n    constructor(\n        @Autowired(LogoutSuccessHandler)\n        protected readonly logoutSuccessHandler: LogoutSuccessHandler[]\n    ) { }\n\n    provide(): LogoutSuccessHandler[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.logoutSuccessHandler).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { LogoutSuccessHandler, LOGOUT_SUCCESS_HANDLER_PRIORITY } from './logout-protocol';\nimport { Component, Value } from '@malagu/core';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component([SimpleUrlLogoutSuccessHandler, LogoutSuccessHandler])\nexport class SimpleUrlLogoutSuccessHandler implements LogoutSuccessHandler {\n\n    @Value('malagu.security.logoutSuccessUrl')\n    protected readonly logoutSuccessUrl: string;\n\n    readonly priority = LOGOUT_SUCCESS_HANDLER_PRIORITY;\n\n    async onLogoutSuccess(): Promise<void> {\n        Context.getResponse().statusCode = 302;\n        Context.getResponse().setHeader('Location', this.logoutSuccessUrl);\n    }\n}\n","import 'reflect-metadata';\nimport { autoBind } from '@malagu/core';\nexport * from '.';\n\nexport default autoBind();\n","export * from './user-protocol';\nexport * from './user-store';\nexport * from './user-checker';\n","import { User, UserChecker } from './user-protocol';\nimport { Component, Autowired, Logger } from '@malagu/core';\nimport { LockedError, AccountExpiredError, DisabledError, CredentialsExpiredError } from '../error';\n\n@Component(UserChecker)\nexport class UserCheckerImpl implements UserChecker {\n    @Autowired(Logger)\n    protected readonly logger: Logger;\n    async check(user: User): Promise<void> {\n        if (!user.accountNonLocked) {\n            this.logger.debug('User account is locked');\n\n            throw new LockedError('User account is locked');\n        }\n\n        if (!user.enabled) {\n            this.logger.debug('User account is disabled');\n\n            throw new DisabledError('User is disabled');\n        }\n\n        if (!user.accountNonExpired) {\n            this.logger.debug('User account is expired');\n\n            throw new AccountExpiredError('User account has expired');\n        }\n\n        if (!user.credentialsNonExpired) {\n            this.logger.debug('User account is expired');\n\n            throw new CredentialsExpiredError('User credentials have expired');\n        }\n    }\n\n}\n","import { Policy } from '../access';\n\nexport const UserStore = Symbol('UserStore');\nexport const UserChecker = Symbol('UserChecker');\n\nexport interface User {\n    username: string;\n    password: string;\n    policies: Policy[];\n    accountNonExpired: boolean;\n    accountNonLocked: boolean;\n    credentialsNonExpired: boolean;\n    enabled: boolean;\n}\n\nexport interface UserStore {\n    load(username: string): Promise<User>;\n}\n\nexport interface UserChecker {\n    check(user: User): Promise<void>;\n}\n","import { UserStore, User } from './user-protocol';\nimport { Value, Component } from '@malagu/core';\nimport { UsernameNotFoundError } from '../error';\nimport { ElPolicy, PolicyType } from '../access';\nimport { AuthorizeType } from '../annotation';\n\n@Component(UserStore)\nexport class UserStoreImpl implements UserStore {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    async load(username: string): Promise<User> {\n        if (this.options.username === username) {\n            return {\n                username,\n                password: this.options.password,\n                accountNonExpired: true,\n                accountNonLocked: true,\n                credentialsNonExpired: true,\n                enabled: true,\n                policies: [ <ElPolicy>{\n                    type: PolicyType.El,\n                    authorizeType: AuthorizeType.Pre,\n                    el: 'true'\n                } ]\n            };\n        }\n\n        throw new UsernameNotFoundError(`Could not find: ${username}`);\n    }\n}\n","import { Component, ApplicationLifecycle, Application, Value } from '@malagu/core';\nimport { createConnections, Connection } from 'typeorm';\nimport { DEFAULT_CONNECTION_NAME } from './constants';\nimport { EntityProvider } from './entity-provider';\n\n@Component(ApplicationLifecycle)\nexport class TypeOrmApplicationLifecycle implements ApplicationLifecycle<Application> {\n\n    @Value('malagu.typeorm')\n    protected readonly options: any;\n\n    protected connections: Connection[];\n\n    async onStart(app: Application): Promise<void> {\n        const { ormConfig } = this.options;\n        let configs: any[];\n        if (Array.isArray(ormConfig)) {\n            configs = ormConfig;\n        } else {\n            ormConfig.name = DEFAULT_CONNECTION_NAME;\n            configs = [ ormConfig ];\n        }\n\n        for (const config of configs) {\n            config.entities = EntityProvider.getEntities(config.name) || [];\n        }\n\n        this.connections = await createConnections(configs);\n    }\n\n    onStop(app: Application): void {\n        if (this.connections) {\n            for (const connection of this.connections) {\n                connection.close();\n            }\n        }\n    }\n\n}\n","export const DEFAULT_CONNECTION_NAME = 'default';\n","\nimport { DEFAULT_CONNECTION_NAME } from './constants';\n\nconst _entitiyMap = new Map<string, Function[]>();\n\nexport function autoBindEntities(entities: any, name = DEFAULT_CONNECTION_NAME) {\n    let _entities = entities;\n    if (!Array.isArray(entities)) {\n        _entities = [];\n        for (const key of Object.keys(entities)) {\n            _entities.push(entities[key]);\n        }\n    }\n    if (!_entitiyMap.get(name)) {\n\n    }\n    const current = _entitiyMap.get(name) || [];\n\n    _entitiyMap.set(name, [ ...current, ..._entities ]);\n\n}\n\nexport namespace EntityProvider {\n    export function getEntities(name = DEFAULT_CONNECTION_NAME) {\n        return _entitiyMap.get(name);\n    }\n}\n","export * from './constants';\nexport * from './entity-provider';\nexport * from './application-lifecycle';\n","export * from './transactional';\n","import { IsolationLevel } from 'typeorm/driver/types/IsolationLevel';\nimport { DEFAULT_CONNECTION_NAME } from '../../common';\nimport { EntityManager, getConnection } from 'typeorm';\nimport { OrmContext } from '../context';\n\nexport enum Propagation {\n    Required, RequiresNew\n}\n\nexport interface TransactionalOption {\n    name?: string;\n    isolation?: IsolationLevel;\n    propagation?: Propagation;\n    readOnly?: boolean;\n}\nexport namespace TransactionalOption {\n    export function is(option: any): option is TransactionalOption {\n        return option && (option.name !== undefined || option.isolation !== undefined || option.readOnly !== undefined);\n    }\n}\n\nexport interface TransactionalDecorator {\n    (nameOrTransactionalOption?: string | TransactionalOption): MethodDecorator;\n}\n\nexport const Transactional = <TransactionalDecorator>function (nameOrTransactionalOption?: string | TransactionalOption): MethodDecorator {\n    const { name, isolation, propagation, readOnly } = getTransactionalOption(nameOrTransactionalOption);\n    return (target: Object, methodName: string, descriptor: PropertyDescriptor) => {\n        const originalMethod = descriptor.value;\n        descriptor.value = async function (...args: any[]) {\n            if (propagation === Propagation.Required) {\n                const em = OrmContext.getEntityManager(name);\n                if (em && em.queryRunner && (em.queryRunner.isTransactionActive || readOnly)) {\n                    return originalMethod.apply(this, args);\n                }\n            }\n            const callback = async (entityManager: EntityManager) => {\n\n                OrmContext.pushEntityManager(name!, entityManager);\n                try {\n                    return await originalMethod.apply(this, args);\n                } finally {\n                    OrmContext.popEntityManager(name!);\n                }\n            };\n            if (readOnly) {\n                return await callback(getConnection(name).manager);\n            } else if (isolation) {\n                return getConnection(name).manager.transaction(isolation, callback);\n            } else {\n                return getConnection(name).manager.transaction(callback);\n            }\n        };\n\n    };\n};\n\nexport function getTransactionalOption(nameOrTransactionalOption?: string | TransactionalOption) {\n    const defaultOption = {\n        name: DEFAULT_CONNECTION_NAME,\n        propagation: Propagation.Required,\n        readOnly: false\n    };\n    let option: TransactionalOption = defaultOption;\n    if (TransactionalOption.is(nameOrTransactionalOption)) {\n        option = { ...defaultOption, ...nameOrTransactionalOption };\n    } else if (nameOrTransactionalOption) {\n        option = { ...defaultOption, name: nameOrTransactionalOption };\n    }\n\n    return option;\n}\n","import { Context, AttributeScope } from '@malagu/web/lib/node';\nimport { EntityManager, ObjectType, EntitySchema, Repository, TreeRepository, MongoRepository } from 'typeorm';\nimport { DEFAULT_CONNECTION_NAME } from '../../common';\n\nexport const CURRENT_ORM_CONTEXT_REQUEST_KEY = 'CurrentOrmContextRequest';\n\nexport namespace OrmContext {\n\n    export function getEntityManager(name = DEFAULT_CONNECTION_NAME): EntityManager {\n        const entityManagerMap = Context.getAttr<Map<string, EntityManager[]>>(CURRENT_ORM_CONTEXT_REQUEST_KEY, AttributeScope.Request);\n        if (entityManagerMap) {\n            const entityManagers = entityManagerMap.get(name);\n            if (entityManagers && entityManagers.length > 0) {\n                return entityManagers[entityManagers.length - 1];\n            }\n        }\n        return <EntityManager><unknown>undefined;\n    }\n\n    export function getRepository<Entity>(target: ObjectType<Entity>|EntitySchema<Entity>|string, name?: string): Repository<Entity>  {\n        return getEntityManager(name).getRepository(target);\n    }\n\n    export function getTreeRepository<Entity>(target: ObjectType<Entity>|EntitySchema<Entity>|string, name?: string): TreeRepository<Entity>  {\n        return getEntityManager(name).getTreeRepository(target);\n    }\n\n    export function getMongoRepository<Entity>(target: ObjectType<Entity>|EntitySchema<Entity>|string, name?: string): MongoRepository<Entity>  {\n        return getEntityManager(name).getMongoRepository(target);\n    }\n\n    export function getCustomRepository<T>(customRepository: ObjectType<T>, name?: string): T {\n        return getEntityManager(name).getCustomRepository(customRepository);\n    }\n\n    export function pushEntityManager(name: string, entityManager: EntityManager): void {\n        let entityManagerMap = Context.getAttr<Map<string, EntityManager[]>>(CURRENT_ORM_CONTEXT_REQUEST_KEY, AttributeScope.Request);\n        if (!entityManagerMap) {\n            entityManagerMap = new Map<string, EntityManager[]>();\n            entityManagerMap.set(name, []);\n            Context.setAttr(CURRENT_ORM_CONTEXT_REQUEST_KEY, entityManagerMap);\n        }\n        entityManagerMap.get(name)!.push(entityManager);\n    }\n\n    export function popEntityManager(name: string): EntityManager | undefined {\n        const entityManagerMap = Context.getAttr<Map<string, EntityManager[]>>(CURRENT_ORM_CONTEXT_REQUEST_KEY, AttributeScope.Request);\n        if (entityManagerMap) {\n            const entityManagers = entityManagerMap.get(name);\n            if (entityManagers && entityManagers.length > 0) {\n                return entityManagers.pop();\n            }\n        }\n    }\n\n}\n","export * from './context-protocol';\n","export * from './annotation';\nexport * from './context';\n","import { autoBind } from '@malagu/core';\nexport * from '../common';\n\nexport default autoBind();\n","\nexport const ENDPOINT = 'malagu.server.endpoint';\nexport const SERVER_PATH = 'malagu.server.path';\nexport const CORS = 'malagu.web.cors';\n","export * from './resolver';\nexport * from './constants';\n","export * from './resolver-protocol';\nexport * from './path-resolver';\n","import { PathResolver } from './resolver-protocol';\nimport { Value, Component } from '@malagu/core';\nimport urlJoin = require('url-join');\n\n@Component(PathResolver)\nexport class PathResolverImpl implements PathResolver {\n\n    @Value('malagu.server.path')\n    protected readonly serverPath: string;\n\n    async resolve(...parts: string[]): Promise<string> {\n        return urlJoin(this.serverPath, ...parts);\n    }\n}\n","export const PathResolver = Symbol('PathResolver');\n\nexport interface PathResolver {\n    resolve(...parts: string[]): Promise<string>;\n}\n","export * from '@malagu/core/lib/common/container/dynamic-container';\nexport * from '@malagu/core/lib/common/container/container-provider';\nexport * from '../context';\nexport * from '../dispatcher';\nexport * from '../../common';\nexport * from '@malagu/core/lib/common/application';\n","import * as requestContext from 'express-http-context';\nimport { Session } from './session/session-protocol';\nimport { Cookies } from './cookies';\nimport { Request, Response } from './http/http-protocol';\n\nexport enum AttributeScope { App, Request, Session }\n\nexport const CURRENT_CONTEXT_REQUEST_KEY = 'CurrentContextRequest';\nexport const CURRENT_COOKIES_REQUEST_KEY = 'CurrentCookiesRequest';\nexport const CURRENT_SESSION_REQUEST_KEY = 'CurrentSessionRequest';\n\nconst appAttrs = new Map<string, any>();\n\nexport interface Context {\n\n    [key: string]: any;\n\n    readonly request: Request;\n\n    readonly response: Response;\n\n}\n\nexport namespace Context {\n\n    export function run(fn: (...args: any[]) => void) {\n        requestContext.ns.run(fn);\n    }\n\n    export function setCurrent(context: Context) {\n        requestContext.set(CURRENT_CONTEXT_REQUEST_KEY, context);\n    }\n\n    export function getCurrent<T extends Context>(): T {\n        return requestContext.get(CURRENT_CONTEXT_REQUEST_KEY);\n    }\n\n    export function getRequest(): Request {\n        return getCurrent().request;\n    }\n\n    export function getResponse(): Response {\n        return getCurrent().response;\n    }\n\n    export function getCookies(): Cookies {\n        return requestContext.get(CURRENT_COOKIES_REQUEST_KEY);\n    }\n\n    export function setCookies(cookies: Cookies): void {\n        requestContext.set(CURRENT_COOKIES_REQUEST_KEY, cookies);\n    }\n\n    export function getSession(): Session {\n        return requestContext.get(CURRENT_SESSION_REQUEST_KEY);\n    }\n\n    export function setSession(session: Session): void {\n        requestContext.set(CURRENT_SESSION_REQUEST_KEY, session);\n    }\n\n    export function setAttr(key: string, value: any, scope: AttributeScope = AttributeScope.Request) {\n        if (scope === AttributeScope.Request) {\n            requestContext.set(key, value);\n        } else if (scope === AttributeScope.Session) {\n            getSession()[key] = value;\n        } else {\n            appAttrs.set(key, value);\n        }\n    }\n\n    export function getAttr<T>(key: string, scope?: AttributeScope): T {\n        if (scope) {\n            if (scope === AttributeScope.Request) {\n                return requestContext.get(key);\n            } else if (scope === AttributeScope.Session) {\n                return getSession()[key];\n            } else {\n                return appAttrs.get(key);\n            }\n        } else {\n            let value = requestContext.get(key);\n            value = value ? value : getSession()[key];\n            return value ? value : appAttrs.get(key);\n        }\n    }\n\n}\n\nexport class HttpContext implements Context {\n    [key: string]: any;\n\n    constructor(public request: Request, public response: Response) {\n    }\n}\n","import { Context } from '../context';\nimport { Component, Value } from '@malagu/core';\nimport * as _Cookies from 'cookies';\nimport { Cookies } from './cookies-protocol';\n\n@Component()\nexport class CookiesFactory {\n\n    @Value('malagu.cookies.keys')\n    protected keys?: string[];\n\n    @Value('malagu.cookies.secure')\n    protected secure?: boolean;\n\n    async create(): Promise<Cookies> {\n        const cookies = new _Cookies(Context.getRequest() as any, Context.getResponse() as any, {\n            keys: this.keys,\n            secure: this.secure\n        });\n        return <Cookies>cookies;\n    }\n}\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Autowired } from '@malagu/core';\nimport * as _Cookies from 'cookies';\nimport { CookiesFactory } from './cookies-factory';\nimport { COOKIES_MIDDLEWARE_PRIORITY } from './cookies-protocol';\n\n@Component(Middleware)\nexport class CookiesMiddleware implements Middleware {\n\n    @Autowired(CookiesFactory)\n    protected readonly cookiesFactory: CookiesFactory;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        if (ctx.request) {\n            Context.setCookies(await this.cookiesFactory.create());\n        }\n        await next();\n    }\n\n    readonly priority = COOKIES_MIDDLEWARE_PRIORITY;\n\n}\n","import { HTTP_MIDDLEWARE_PRIORITY } from '../http';\n\nexport const COOKIES_MIDDLEWARE_PRIORITY = HTTP_MIDDLEWARE_PRIORITY - 100;\n\nexport const Cookies = Symbol('Cookies');\n\nexport interface Cookies {\n    get(name: string, opt?: any): string | undefined;\n    set(name: string, vaule: string, opt?: any): void;\n}\n","export * from './cookies-protocol';\nexport * from './cookies-middleware';\nexport * from './cookies-factory';\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Value } from '@malagu/core';\nimport * as cors from 'cors';\nimport { CORS } from '../../common';\nimport { CORS_MIDDLEWARE_PRIORITY } from './cors-protocol';\n\n@Component(Middleware)\nexport class CorsMiddleware implements Middleware {\n\n    @Value(CORS)\n    protected readonly options: any;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        return new Promise((resolve, reject) => cors(this.options)(ctx.request as any, ctx.response as any, () => next().then(resolve).catch(reject)));\n    }\n\n    readonly priority = CORS_MIDDLEWARE_PRIORITY;\n\n}\n","export const CORS_MIDDLEWARE_PRIORITY = 2100;\n","export * from './cors-protocol';\nexport * from './cors-middleware';\n","import { Context } from '../context';\n\nexport const Dispatcher = Symbol('Dispatcher');\n\nexport interface Dispatcher<T extends Context> {\n    dispatch(ctx: T): Promise<void>;\n}\n","import { Context } from '../context';\nimport { MiddlewareProvider } from '../middleware';\nimport { ErrorHandlerProvider } from '../error/error-hander-provider';\nimport { Dispatcher } from './dispatcher-protocol';\nimport { Component, Autowired } from '@malagu/core';\nimport { HandlerMapping, HandlerExecutionChain } from '../handler/handler-protocol';\n\n@Component(Dispatcher)\nexport class DispatcherImpl implements Dispatcher<Context> {\n    @Autowired(HandlerMapping)\n    protected readonly handlerMapping: HandlerMapping;\n\n    @Autowired(HandlerExecutionChain)\n    protected handlerExecutionChain: HandlerExecutionChain;\n\n    @Autowired\n    protected middlewareProvider: MiddlewareProvider;\n\n    @Autowired\n    protected errorHandlerProvider: ErrorHandlerProvider;\n\n    async dispatch(ctx: Context): Promise<void> {\n        try {\n            Context.setCurrent(ctx);\n            const middlewares = this.middlewareProvider.provide();\n            const handler = await this.handlerMapping.getHandler();\n            await this.handlerExecutionChain.execute(handler, middlewares);\n        } catch (err) {\n            await this.handleError(ctx, err);\n        }\n    }\n\n    protected async handleError(ctx: Context, err: Error): Promise<void> {\n        const errorHandlers = this.errorHandlerProvider.provide();\n        for (const handler of errorHandlers) {\n            if (await handler.canHandle(ctx, err)) {\n                try {\n                    await handler.handle(ctx, err);\n                } catch (error) {\n                    continue;\n                }\n                return;\n            }\n        }\n    }\n}\n","export * from './dispatcher';\nexport * from './dispatcher-protocol';\n","import { Context } from '../context';\nimport { Component, Autowired, Prioritizeable, ValidationErrors } from '@malagu/core';\nimport { injectable } from 'inversify';\nimport { ErrorHandler, DEFALUT_ERROR_HANDlER_PRIORITY, HTTP_ERROR_HANDlER_PRIORITY, VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY } from './error-protocol';\nimport { HttpError } from './http-error';\nimport { HttpStatus } from '../http';\n\n@injectable()\nexport abstract class AbstractErrorHandler implements ErrorHandler {\n    readonly priority: number = DEFALUT_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(true);\n    }\n\n    async handle(ctx: Context, err: Error): Promise<void> {\n        console.error(err);\n        ctx.response.statusCode = 500;\n        ctx.response.end(err.message);\n        await this.doHandle(ctx, err);\n    }\n\n    doHandle(ctx: Context, err: Error): Promise<void> {\n        return Promise.resolve();\n    }\n}\n\n@Component(ErrorHandler)\nexport class DefaultErrorHandler extends AbstractErrorHandler {\n}\n\n@Component(ErrorHandler)\nexport class HttpErrorHandler implements ErrorHandler {\n    readonly priority: number = HTTP_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof HttpError);\n    }\n\n    async handle(ctx: Context, err: HttpError): Promise<void> {\n        ctx.response.statusCode = err.statusCode;\n        ctx.response.end(err.message);\n    }\n}\n\n@Component(ErrorHandler)\nexport class ValidationErrorsHandler implements ErrorHandler {\n    readonly priority: number = VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof ValidationErrors);\n    }\n\n    async handle(ctx: Context, err: HttpError): Promise<void> {\n        ctx.response.statusCode = HttpStatus.BAD_REQUEST;\n        ctx.response.end(err.message);\n    }\n}\n\n@Component()\nexport class ErrorHandlerProvider {\n\n    protected prioritized: ErrorHandler[];\n\n    constructor(\n        @Autowired(ErrorHandler)\n        protected readonly handlers: ErrorHandler[]\n    ) { }\n\n    provide(): ErrorHandler[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.handlers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { Context } from '../context';\n\nexport const ErrorHandler = Symbol('ErrorHandler');\n\nexport const DEFALUT_ERROR_HANDlER_PRIORITY = 500;\nexport const HTTP_ERROR_HANDlER_PRIORITY = DEFALUT_ERROR_HANDlER_PRIORITY + 100;\nexport const VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY = HTTP_ERROR_HANDlER_PRIORITY + 100;\n\nexport interface ErrorHandler {\n    readonly priority: number;\n    canHandle(ctx: Context, err: Error): Promise<boolean>;\n    handle(ctx: Context, err: Error): Promise<void>;\n}\n","import { CustomError } from '@malagu/core';\n\nexport class HttpError extends CustomError {\n\n    constructor(public statusCode: number, message?: string) {\n        super(message);\n    }\n\n}\n","export * from './http-error';\nexport * from './error-hander-provider';\nexport * from './error-protocol';\n","import { compose, Middleware } from '../middleware';\nimport { Component } from '@malagu/core';\nimport { Context } from '../context';\nimport { HandlerExecutionChain, HandlerAdapter } from './handler-protocol';\n\n@Component(HandlerExecutionChain)\nexport class HandlerExecutionChainImpl implements HandlerExecutionChain {\n\n    execute(handler: HandlerAdapter, middlewares: Middleware[]): Promise<void> {\n        const middleware = compose(middlewares);\n        return middleware(Context.getCurrent(), {\n            handle: (c: Context, next: () => Promise<void>) => handler.handle(),\n            priority: 0\n        });\n    }\n\n}\n","import { Autowired, Component, Prioritizeable } from '@malagu/core';\nimport { HandlerMapping, HandlerAdapter } from './handler-protocol';\nimport { HttpError } from '../error';\n\n@Component(HandlerMapping)\nexport class HandlerMappingImpl implements HandlerMapping {\n\n    protected prioritized: HandlerAdapter[];\n\n    constructor(\n        @Autowired(HandlerAdapter)\n        protected readonly handlerAdapters: HandlerAdapter[]\n    ) {\n        this.prioritized = Prioritizeable.prioritizeAllSync(this.handlerAdapters).map(c => c.value);\n    }\n\n    async getHandler(): Promise<HandlerAdapter> {\n        for (const handler of this.prioritized) {\n            if (await handler.canHandle()) {\n                return handler;\n            }\n        }\n        throw new HttpError(404, 'Not found a suitable handler adapter');\n    }\n\n}\n","import { Middleware } from '../middleware';\n\nexport const HandlerExecutionChain = Symbol('HandlerExecutionChain');\n\nexport const HandlerAdapter = Symbol('HandlerAdapter');\n\nexport const HandlerMapping = Symbol('HandlerMapping');\n\nexport interface HandlerExecutionChain {\n    execute(handler: HandlerAdapter, middlewares: Middleware[]): Promise<void>;\n}\n\nexport interface HandlerAdapter {\n    readonly priority: number;\n    handle(): Promise<void>;\n    canHandle(): Promise<boolean>;\n}\n\nexport interface HandlerMapping {\n    getHandler(): Promise<HandlerAdapter>;\n}\n","export * from './handler-execution-chain';\nexport * from './handler-mapping';\nexport * from './handler-protocol';\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Deferred } from '@malagu/core';\nimport { HTTP_MIDDLEWARE_PRIORITY } from './http-protocol';\n\n@Component(Middleware)\nexport class HttpMiddleware implements Middleware {\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        await next();\n        const response = ctx.response;\n        if (!response.finished) {\n            const body = response.body;\n            if (body instanceof Deferred) {\n                response.end(await body.promise);\n            } else {\n                response.end(response.body);\n            }\n        }\n    }\n\n    readonly priority = HTTP_MIDDLEWARE_PRIORITY;\n\n}\n","import * as http from 'http';\nimport * as net from 'net';\nimport { CORS_MIDDLEWARE_PRIORITY } from '../cors';\n\nexport const HTTP_MIDDLEWARE_PRIORITY = CORS_MIDDLEWARE_PRIORITY - 100;\n\nexport const XML_HTTP_REQUEST = 'XMLHttpRequest';\nexport const X_REQUESTED_WITH = 'X-Requested-With';\n\nexport interface Request {\n    method: string;\n    headers: http.IncomingHttpHeaders;\n    body: any;\n    url: string;\n    path: string;\n    query: { [key: string]: string };\n    connection: net.Socket;\n}\n\nexport interface Response {\n    statusCode: number;\n    setHeader(name: string, value: number | string | string[]): void;\n    getHeader(name: string): number | string | string[] | undefined;\n    getHeaders(): http.OutgoingHttpHeaders;\n    end(chunk: any, encoding?: string, cb?: Function): void;\n    finished: boolean;\n    body?: any;\n}\n\nexport enum HttpStatus {\n    CONTINUE = 100,\n    SWITCHING_PROTOCOLS = 101,\n    PROCESSING = 102,\n    OK = 200,\n    CREATED = 201,\n    ACCEPTED = 202,\n    NON_AUTHORITATIVE_INFORMATION = 203,\n    NO_CONTENT = 204,\n    RESET_CONTENT = 205,\n    PARTIAL_CONTENT = 206,\n    AMBIGUOUS = 300,\n    MOVED_PERMANENTLY = 301,\n    FOUND = 302,\n    SEE_OTHER = 303,\n    NOT_MODIFIED = 304,\n    TEMPORARY_REDIRECT = 307,\n    PERMANENT_REDIRECT = 308,\n    BAD_REQUEST = 400,\n    UNAUTHORIZED = 401,\n    PAYMENT_REQUIRED = 402,\n    FORBIDDEN = 403,\n    NOT_FOUND = 404,\n    METHOD_NOT_ALLOWED = 405,\n    NOT_ACCEPTABLE = 406,\n    PROXY_AUTHENTICATION_REQUIRED = 407,\n    REQUEST_TIMEOUT = 408,\n    CONFLICT = 409,\n    GONE = 410,\n    LENGTH_REQUIRED = 411,\n    PRECONDITION_FAILED = 412,\n    PAYLOAD_TOO_LARGE = 413,\n    URI_TOO_LONG = 414,\n    UNSUPPORTED_MEDIA_TYPE = 415,\n    REQUESTED_RANGE_NOT_SATISFIABLE = 416,\n    EXPECTATION_FAILED = 417,\n    I_AM_A_TEAPOT = 418,\n    UNPROCESSABLE_ENTITY = 422,\n    FAILED_DEPENDENCY = 424,\n    TOO_MANY_REQUESTS = 429,\n    INTERNAL_SERVER_ERROR = 500,\n    NOT_IMPLEMENTED = 501,\n    BAD_GATEWAY = 502,\n    SERVICE_UNAVAILABLE = 503,\n    GATEWAY_TIMEOUT = 504,\n    HTTP_VERSION_NOT_SUPPORTED = 505,\n}\n","export * from './http-protocol';\nexport * from './http-middleware';\n","export * from './middleware';\nexport * from './middleware';\nexport * from './dispatcher';\nexport * from './context';\nexport * from './error';\nexport * from './handler';\nexport * from './cookies';\nexport * from './session';\nexport * from './http';\nexport * from './matcher';\nexport * from './cors';\n","export * from './matcher-protocol';\nexport * from './request-matcher';\n","export const RequestMatcher = Symbol('RequestMatcher');\n\nexport interface RequestMatcher {\n    match(pattern: any, method?: string): Promise<any>;\n}\n","import { RequestMatcher } from './matcher-protocol';\nimport { Context } from '../context';\nimport { Component } from '@malagu/core';\nimport * as UrlPattern from 'url-pattern';\n\n@Component(RequestMatcher)\nexport class RequestMatcherImpl implements RequestMatcher {\n    protected caches: Map<string, UrlPattern> = new Map<string, UrlPattern>();\n\n    async match(pattern: any, method?: string): Promise<any> {\n        const request = Context.getRequest();\n        const path = request.path;\n        if (method && request.method && method.toLowerCase() !== request.method.toLowerCase()) {\n            return false;\n        }\n        pattern = pattern || '/';\n        let urlPathern: UrlPattern | undefined;\n        if (typeof pattern === 'string') {\n            urlPathern = this.caches.get(pattern);\n            if (!urlPathern) {\n                urlPathern = new UrlPattern(pattern);\n                this.caches.set(pattern, urlPathern);\n            }\n        } else {\n            urlPathern = new UrlPattern(pattern);\n        }\n        return urlPathern.match(path);\n    }\n\n}\n","import { Context } from '../context';\nimport { Middleware } from './middleware-provider';\n\nexport function compose(middlewares: Middleware[]) {\n    return (ctx: Context, next: Middleware) => {\n        let index = -1;\n        const dispatch = (i: number): Promise<void> => {\n            if (i <= index) {\n                return Promise.reject(new Error('next() called multiple times'));\n            }\n            index = i;\n            let middleware = middlewares[i];\n            if (i === middlewares.length) {\n                middleware = next;\n            }\n            if (!middleware) {\n                return Promise.resolve();\n            }\n            try {\n                return middleware.handle(ctx, (): Promise<void> => dispatch(i + 1));\n            } catch (err) {\n                return Promise.reject(err);\n            }\n        };\n        return dispatch(0);\n    };\n}\n","export * from './middleware-provider';\nexport * from './compose';\n","import { Context } from '../context';\nimport { Component, Autowired, Optional, Prioritizeable } from '@malagu/core';\n\nexport const Middleware = Symbol('Middleware');\n\nexport interface Middleware {\n\n    handle(ctx: Context, next: () => Promise<void>): Promise<void>;\n\n    readonly priority: number;\n}\n\n@Component()\nexport class MiddlewareProvider {\n\n    protected prioritized: Middleware[];\n\n    constructor(\n        @Autowired(Middleware) @Optional\n        protected readonly middlewares: Middleware[]\n    ) { }\n\n    provide(): Middleware[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.middlewares).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import 'reflect-metadata';\nimport 'reflect-metadata';\nimport { autoBind } from '@malagu/core';\nimport '../common';\nimport '.';\n\nexport default autoBind();\n","export * from './session-manager';\nexport * from './session';\nexport * from './session-store';\nexport * from './session-strategy';\nexport * from './session-middleware';\n","import { SessionManager, Session, SessionStrategy, SessionStore, COOKIE_EXP_DATE } from './session-protocol';\nimport { Autowired, Value, Component } from '@malagu/core';\nimport { Context } from '../context';\n\n@Component(SessionManager)\nexport class SessionManagerImpl implements SessionManager {\n\n    @Value('malagu.session.sessionIdKey')\n    protected readonly sessionIdKey: string;\n\n    @Autowired(SessionStrategy)\n    protected readonly sessionStrategy: SessionStrategy;\n\n    @Autowired(SessionStore)\n    protected readonly sessionStore: SessionStore;\n\n    protected async getSessionId() {\n        const cookies = Context.getCookies();\n        return cookies.get(this.sessionIdKey);\n    }\n\n    async get(): Promise<Session> {\n        if (Context.getSession()) {\n            return Context.getSession();\n        }\n        const sessionId = await this.getSessionId();\n        if (sessionId) {\n            const session = await this.sessionStore.get(sessionId);\n            if (session && await this.sessionStrategy.valid(session)) {\n                return session;\n            }\n        }\n        return await this.sessionStrategy.create();\n    }\n\n    async remove(): Promise<void> {\n        if (Context.getSession()) {\n            await this.sessionStore.remove(Context.getSession().id);\n        }\n        Context.getCookies().set(this.sessionIdKey, '', {\n            expires: COOKIE_EXP_DATE,\n            maxAge: false,\n        });\n    }\n\n    async commit(): Promise<void> {\n        const session = Context.getSession();\n        if (!session) {\n            return;\n        }\n        if (await this.sessionStrategy.shouldSaveSession(session)) {\n            await this.sessionStore.set(session);\n            Context.getCookies().set(this.sessionIdKey, session.id);\n        }\n    }\n\n}\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Value, Autowired } from '@malagu/core';\nimport { SessionManager, SESSION_MIDDLEWARE_PRIORITY } from './session-protocol';\n\n@Component(Middleware)\nexport class SessionMiddleware implements Middleware {\n\n    @Autowired(SessionManager)\n    protected readonly sessionManager: SessionManager;\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        Context.setSession(await this.sessionManager.get());\n        try {\n            await next();\n        } finally {\n            if (this.sessionOptions.autoCommit) {\n                await this.sessionManager.commit();\n            }\n        }\n    }\n\n    readonly priority = SESSION_MIDDLEWARE_PRIORITY;\n\n}\n","import { COOKIES_MIDDLEWARE_PRIORITY } from '../cookies';\n\nexport const Session = Symbol('Session');\nexport const SessionStore = Symbol('SessionStore');\nexport const SessionManager = Symbol('SessionManager');\nexport const SessionStrategy = Symbol('SessionStrategy');\n\nexport const COOKIE_EXP_DATE = new Date('Thu, 01 Jan 1970 00:00:00 GMT');\n\nexport const SESSION_MIDDLEWARE_PRIORITY = COOKIES_MIDDLEWARE_PRIORITY - 100;\n\nexport interface Session {\n    id: string;\n    isNew: boolean;\n    expire: number;\n    maxAge: number;\n    readonly changed: boolean;\n    [key: string]: any;\n    toJSON(): any;\n\n}\n\nexport interface SessionStore {\n    get(id: string): Promise<Session | undefined>;\n    set(session: Session): Promise<void>;\n    remove(id: string): Promise<void>;\n}\n\nexport interface SessionManager {\n\n    get(): Promise<Session>;\n    remove(): Promise<void>;\n    commit(): Promise<void>;\n}\n\nexport interface SessionStrategy {\n    valid(session: Session): Promise<boolean>;\n    create(obj?: any): Promise<Session>;\n    shouldSaveSession(session: Session): Promise<boolean>;\n}\n","import { Session, SessionStrategy, SessionStore, COOKIE_EXP_DATE } from './session-protocol';\nimport { Autowired, Value, Component } from '@malagu/core';\nimport { Context } from '../context';\n\n@Component(SessionStore)\nexport class CookieSessionStore implements SessionStore {\n\n    protected session: Session | undefined;\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    @Autowired(SessionStrategy)\n    protected readonly sessionStrategy: SessionStrategy;\n\n    async get(id: string): Promise<Session | undefined> {\n        const value = Context.getCookies().get(this.sessionOptions.sessionKey, this.sessionOptions);\n        if (value) {\n            return await this.sessionStrategy.create(JSON.parse(Buffer.from(value, 'base64').toString('utf8')));\n        }\n    }\n\n    async set(session: Session): Promise<void> {\n        Context.getCookies().set(this.sessionOptions.sessionKey, Buffer.from(JSON.stringify(session.toJSON())).toString('base64'), this.sessionOptions);\n    }\n\n    async remove(id: string): Promise<void> {\n        Context.getCookies().set(this.sessionOptions.sessionKey, '', {\n            expires: COOKIE_EXP_DATE,\n            maxAge: false,\n        });\n    }\n\n}\n","import { SessionStrategy, Session } from './session-protocol';\nimport { SessionImpl } from './session';\nimport { Value, Component } from '@malagu/core';\n\n@Component(SessionStrategy)\nexport class SessionStrategyImpl implements SessionStrategy {\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    async valid(session: Session): Promise<boolean> {\n        if (session.expire && session.expire < Date.now()) {\n            return false;\n        }\n        return true;\n    }\n\n    create(obj?: any): Promise<Session> {\n        return Promise.resolve(new SessionImpl(this.sessionOptions, obj));\n    }\n\n    async shouldSaveSession(session: Session): Promise<boolean> {\n        if (session.changed) {\n            return true;\n        }\n        // save if opts.renew and session will expired\n        if (this.sessionOptions.renew === true) {\n            const expire = session.expire;\n            const maxAge = session.maxAge;\n            // renew when session will expired in maxAge / 2\n            if (expire && maxAge && expire - Date.now() < maxAge / 2) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import { Session } from './session-protocol';\nimport * as uuid from 'uuid/v4';\nconst crc = require('crc').crc32;\n\nexport class SessionImpl implements Session {\n    readonly id = uuid();\n    isNew: boolean = true;\n    expire: number;\n    maxAge: number;\n    protected _preHash: string;\n    constructor(sessionOptions: any, obj?: any) {\n        if (obj) {\n            this.isNew = false;\n            for (const key of Object.keys(obj)) {\n                (this as any)[key] = obj[key];\n            }\n        } else {\n            this.expire = sessionOptions.maxAge + Date.now();\n            this.maxAge = sessionOptions.maxAge;\n        }\n        this._preHash = this.hash();\n    }\n\n    protected hash() {\n        return crc(JSON.stringify(this.toJSON()));\n    }\n\n    toJSON(): any {\n        const obj: any = {};\n        for (const key of Object.keys(this)) {\n            if (key !== 'isNew' && key[0] !== '_') {\n                obj[key] = (this as any)[key];\n            }\n        }\n        return obj;\n    }\n\n    get changed() {\n        if (this._preHash !== this.hash()) {\n            return true;\n        }\n        return false;\n    }\n\n}\n","export const BlogServer = Symbol('BlogServer');\n\nexport interface BlogServer {\n    fetchHottestArticles(limit: number): Promise<DouMiBlog.ArticleList>;\n    fetchArticleList(currentPage: number, condition?: DouMiBlog.queryCondition): Promise<DouMiBlog.ArticleList>;\n    findArticlesByKeyword(keyword: string): Promise<DouMiBlog.ArticleBrief[]>\n    fetchArticleDetail(slug: string): Promise<DouMiBlog.ArticleDetail>;\n    fetchTagsList(): Promise<DouMiBlog.TagsItem[]>;\n    fetchCatsList(): Promise<DouMiBlog.CategoryItem[]>;\n    fetchArchsList(): Promise<DouMiBlog.ArchiveItem[]>;\n    fetchWebsiteChangeLog(): Promise<DouMiBlog.ChangeLog[]>\n    registerUser(param: DouMiBlog.RegisterParam): Promise<string>;\n}\n\nexport namespace DouMiBlog {\n  export interface ChangeLog {\n    title: string,\n    desc1: string,\n    desc2: string,\n    date: string,\n    time: string\n  }\n  export interface ArticleList {\n    currentPage: number,\n    list: ArticleBrief[],\n    pageCount: number,\n  }\n  export interface ArticleBrief {\n    title: string,\n    archiveTime: string,\n    slug: string,\n    illustration: string,\n    tags: string[],\n    category: string,\n    digest: string\n  }\n\n  interface PropertyItem {\n    id: number,\n    name: string,\n    articlesCount: number\n  }\n\n  export interface TagsItem extends PropertyItem {}\n\n  export interface CategoryItem extends PropertyItem {}\n\n  export interface ArchiveItem extends PropertyItem {\n    archiveTime: string;\n  }\n\n  export interface ArticleDetail {\n    id?: number;\n    title: string;\n    content: string;\n    slug: string;\n    digest: string;\n    pv: number;\n    articleStatus: 'draft' | 'published';\n    illustration: string;\n    author: string;\n    tags: string[];\n    archiveTime: string;\n    category: string;\n  }\n\n  export interface queryCondition {\n    queryTag?: number,\n    queryCat?: number,\n    queryArch?: number,\n  }\n  export interface RegisterParam {\n    email: string,\n    username: string,\n    password: string\n  }\n\n  export interface LoginParam {\n    email: string,\n    password: string\n  }\n}\n","import { Component, Autowired, Value } from '@malagu/core';\nimport { AuthenticationProvider, Authentication, DEFAULT_AUTHENTICATION_PROVIDER__PRIORITY, PasswordEncoder, UserStore, UserChecker, BadCredentialsError } from '@malagu/security/lib/node';\nimport { Context, RequestMatcher } from '@malagu/web/lib/node';\n\n@Component({id: AuthenticationProvider, rebind: true})\nexport class AuthenticationProviderImpl implements AuthenticationProvider {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    @Autowired(PasswordEncoder)\n    protected readonly passwordEncoder: PasswordEncoder;\n\n    @Autowired(UserStore)\n    protected readonly userStore: UserStore;\n\n    @Autowired(UserChecker)\n    protected readonly userChecker: UserChecker;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher\n\n    priority = DEFAULT_AUTHENTICATION_PROVIDER__PRIORITY;\n\n    async authenticate(): Promise<Authentication> {\n        const username = this.doGetValue(this.options.usernameKey);\n        const password = this.doGetValue(this.options.passwordKey);\n        let user\n        try {\n          if (!password || !username) {\n              throw new BadCredentialsError('Bad credentials');\n          }\n          user = await this.userStore.load(username);\n          await this.userChecker.check(user);\n          if (!await this.passwordEncoder.matches(password, user.password)) {\n              throw new BadCredentialsError('Bad credentials');\n          }\n          Context.getResponse().statusCode = 200;\n          Context.getResponse().body = JSON.stringify({status: 1, data: ''});\n          return {\n            principal: user,\n            credentials: '',\n            policies: user.policies,\n            authenticated: true\n          };\n        } catch (err) {\n          Context.getResponse().statusCode = 200;\n          Context.getResponse().body = JSON.stringify({status: 0, error: ''});\n          return {\n            principal: null,\n            credentials: '',\n            policies: [],\n            authenticated: false\n          };\n        }\n    }\n\n    protected doGetValue(key: string): string {\n        const request = Context.getRequest();\n        if (request.body) {\n            return request.body[key];\n        } else {\n            return request.query[key];\n        }\n    }\n\n    async support(): Promise<boolean> {\n       return !!await this.requestMatcher.match(this.options.loginUrl, this.options.loginMethod);\n    }\n\n}\n","import { BlogServer, DouMiBlog } from '../common/blog-protocol';\nimport { Rpc } from '@malagu/rpc';\nimport { Anonymous } from '@malagu/security/lib/node';\nimport { Autowired } from '@malagu/core';\nimport { Transactional } from '@malagu/typeorm/lib/node';\nimport { BlogServiceSymbol, BlogService } from './services';\nimport { AuthServiceSymbol, AuthService } from './services/auth.service';\nimport { WebsiteServiceSymbol, WebsiteService } from './services/website.service';\n\n\nconst pick = require('lodash.pick');\n\n@Rpc(BlogServer)\n@Anonymous()\nexport class BlogServerImpl implements BlogServer {\n\n  @Autowired(AuthServiceSymbol)\n  protected readonly authService: AuthService;\n\n  @Autowired(BlogServiceSymbol)\n  protected readonly blogService: BlogService;\n\n  @Autowired(WebsiteServiceSymbol)\n  protected readonly websiteService: WebsiteService;\n\n  @Transactional()\n  async fetchHottestArticles(limit: number): Promise<DouMiBlog.ArticleList> {\n    const result = await this.blogService.fetchArticleList(1, limit, {\n      pv: 'DESC'\n    })\n\n    result.list = result.list.map(item => pick(item, ['title', 'slug', 'archiveTime']))\n\n    return Promise.resolve(result)\n  }\n\n  // TODO: fix the pipeManager bug\n  @Transactional()\n  async fetchArticleList(currentPage: number, condition?: DouMiBlog.queryCondition): Promise<DouMiBlog.ArticleList> {\n    const result = await this.blogService.fetchArticleList(currentPage, 5, null, condition)\n\n    result.list = result.list.map(item => pick(item, ['title', 'slug', 'archiveTime', 'digest', 'illustration', 'author', 'tags', 'category']))\n\n    return Promise.resolve(result)\n  }\n\n  @Transactional()\n  async fetchArticleDetail(slug: string): Promise<DouMiBlog.ArticleDetail> {\n    const result = await this.blogService.fetchArticleDetail(slug)\n\n    return Promise.resolve(result);\n  }\n\n  @Transactional()\n  async findArticlesByKeyword(keyword: string): Promise<DouMiBlog.ArticleBrief[]> {\n    const result = await this.blogService.searchArticleByKeyword(keyword);\n\n    const list = result.map(item => pick(item, ['title', 'slug']))\n\n    return Promise.resolve(list);\n  }\n\n  @Transactional()\n  async fetchTagsList(): Promise<DouMiBlog.TagsItem[]> {\n    const result = await this.blogService.fetchTagsListWithArticle();\n\n    return Promise.resolve(result)\n  }\n  @Transactional()\n  async fetchCatsList(): Promise<DouMiBlog.CategoryItem[]> {\n    const result = await this.blogService.fetchCatListWithArticle();\n\n    return Promise.resolve(result)\n  }\n\n  @Transactional()\n  async fetchArchsList(): Promise<DouMiBlog.ArchiveItem[]> {\n    const result = await this.blogService.fetchArchListWithArticle()\n\n    return Promise.resolve(result)\n  }\n\n  @Transactional()\n  async fetchWebsiteChangeLog() {\n    const result = await this.websiteService.websiteChangeLog()\n\n    return Promise.resolve(result.reverse());\n  }\n\n  @Transactional()\n  async registerUser(param: DouMiBlog.RegisterParam): Promise<string> {\n    await this.authService.registerUser(param);\n    return Promise.resolve('');\n  }\n}\n","import { Controller, Post, Put, Body, Session } from '@malagu/mvc/lib/node';\nimport { Autowired } from '@malagu/core';\nimport { Transactional } from '@malagu/typeorm/lib/node';\nimport { DouMiBlog } from '../common/blog-protocol';\nimport { BlogServiceSymbol, BlogService } from './services/blog.service';\nimport { Article } from './entity/article';\n\n// api\n@Controller('/api')\nexport class blogAdminController {\n\n  @Autowired(BlogServiceSymbol)\n  protected readonly blogService: BlogService;\n\n  // \n  @Post('/blog')\n  @Transactional()\n  async createBlog(\n    @Body() article: DouMiBlog.ArticleDetail,\n    @Session() session: any,\n  ) {\n\n    const userInfo = session['malagu:securityContext'].authentication.principal;\n    const { username } = userInfo\n\n    const result = await this.blogService.createOrUpdateArticle(article, username);\n\n    return { status: 1, data: {\n      msg: article.articleStatus === 'draft' ? '' : '',\n      slug: (result as Article).slug\n    }};\n  }\n\n  // \n  @Put('/blog')\n  @Transactional()\n  async updateBlog(\n    @Body() article: DouMiBlog.ArticleDetail,\n    @Session() session: any,\n  ) {\n    const userInfo = session['malagu:securityContext'].authentication.principal;\n    const { username } = userInfo\n\n    await this.blogService.createOrUpdateArticle(article, username, true);\n\n    return { status: 1, data: {\n      msg: article.articleStatus === 'draft' ? '' : ''\n    }};\n  }\n}\n","import { Entity, PrimaryGeneratedColumn, Column, OneToMany, CreateDateColumn, UpdateDateColumn, Index } from 'typeorm';\nimport { Article } from './article';\n\n@Entity()\nexport class Archive {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  // '2010-01'\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  @Index({ unique: true })\n  archiveTime: string;\n\n  @OneToMany(type => Article, article => article.archiveTime)\n  articles: Article[]\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, ManyToMany, JoinTable, Index, CreateDateColumn, UpdateDateColumn } from 'typeorm';\nimport { User } from './user';\nimport { Tag } from './tag';\nimport { Archive } from './archive';\nimport { Category } from './category';\n\n\nexport enum ArticleStatus {\n  DRAFT = \"draft\",\n  PUBLISHED = \"published\",\n}\n\n@Entity()\nexport class Article {\n\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  // \n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  title: string;\n\n  // \n  @Column('bigint')\n  pv: number;\n\n  // markdown\n  @Column('longtext')\n  content: string;\n\n  // \n  @Column('varchar')\n  @Index({unique: true})\n  slug: string;\n\n  // \n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  digest: string;\n\n  // ,\n  @Column({\n    type: \"enum\",\n    enum: ArticleStatus,\n    default: ArticleStatus.DRAFT\n  })\n  articleStatus: ArticleStatus;\n\n  // \n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  illustration: string;\n\n  // \n  @ManyToOne(type => User, user => user.articles)\n  author: User;\n\n  // tag\n  @ManyToMany(type => Tag, tag => tag.articles)\n  @JoinTable()\n  tags: Tag[];\n\n  // \n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  fullArchiveTime: string;\n\n  // , \n  @ManyToOne(type => Archive, archive => archive.articles)\n  archiveTime: Archive;\n\n  // \n  @ManyToOne(type => Category, category => category.articles)\n  category: Category;\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import { Entity, PrimaryGeneratedColumn, Column, OneToMany, Index, CreateDateColumn, UpdateDateColumn } from 'typeorm';\nimport { Article } from './article';\n\n@Entity()\nexport class Category {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  @Index({ unique: true })\n  name: string;\n\n  @OneToMany(type => Article, article => article.category)\n  articles: Article[]\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","export * from './archive';\nexport * from './category';\nexport * from './tag';\nexport * from './user';\nexport * from './article';\nexport * from './reader';\nexport * from './website';\n","import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn } from 'typeorm';\n\n@Entity()\nexport class Reader {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  articleSlug: string;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  date: string; // ,\n\n  @Column('simple-array')\n  ips: string[]; // ipuv\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import { Entity, PrimaryGeneratedColumn, Column, ManyToMany, CreateDateColumn, UpdateDateColumn, Index  } from 'typeorm';\nimport { Article } from './article';\n\n@Entity()\nexport class Tag {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  @Index({ unique: true })\n  name: string;\n\n  // tag\n  @ManyToMany(type => Article, article => article.tags, { cascade: true })\n  articles: Article[];\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import { Entity, PrimaryGeneratedColumn, Column, OneToMany, CreateDateColumn, UpdateDateColumn, Index  } from 'typeorm';\nimport { Article } from './article';\n\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({\n    type: \"varchar\",\n    length: 20,\n    nullable: false\n  })\n  username: string;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  password: string;\n\n  @Column({\n    type: \"varchar\",\n    length: 200,\n    nullable: false\n  })\n  @Index({ unique: true })\n  email: string;\n\n  @OneToMany(type => Article, article => article.author)\n  articles: Article[];\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn } from 'typeorm';\n\n@Entity()\nexport class Website {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column('bigint')\n  todayUv: number;\n\n  @Column('simple-array')\n  todayIps: string[];\n\n  @Column('bigint')\n  todayPv: number;\n\n  @Column('bigint')\n  totalUv: number;\n\n  @Column('bigint')\n  totalPv: number;\n\n  @CreateDateColumn()\n  public readonly createdAt!: Date;\n\n  @UpdateDateColumn()\n  public readonly updatedAt!: Date;\n}\n","import './blog-server';\nimport './auth.provider';\nimport './services';\nimport './user.store';\nimport './blog.admin.controller';\nimport './schedule';\nimport { autoBindEntities } from '@malagu/typeorm';\nimport * as entities from './entity';\nimport { autoBind } from '@malagu/core';\n\nautoBindEntities(entities);\nexport default autoBind();\n","import { Autowired, Component, Logger, ApplicationLifecycle, Application } from '@malagu/core';\n// import { BlogServiceSymbol, BlogService } from './services/index';\n\nconst CronJob = require('cron').CronJob;\n\n@Component(ApplicationLifecycle)\nexport class DouMiApplicationLifecycle implements ApplicationLifecycle<Application> {\n  @Autowired(Logger)\n  protected readonly logger: Logger;\n\n  protected job: any;\n\n  async onStart(app: Application): Promise<void> {\n    var job = new CronJob('0 24 */1 * * *', async () => {\n      try {\n        // await this.blogService.clearTodayIpsArray()\n        this.logger.info(`schedule trigger at ${new Date()} for clearing the visitor ips`)\n      } catch (err) {\n        console.error(err)\n      }\n    }, null, true);\n    job.start();\n  }\n\n  onStop(app: Application): void {\n    this.job.stop();\n  }\n\n}\n","import { Component, Autowired } from '@malagu/core';\nimport { PasswordEncoder } from '@malagu/security/lib/node';\nimport { Transactional, OrmContext } from '@malagu/typeorm/lib/node';\nimport { User } from '../entity';\nimport { DouMiBlog } from '../../common/blog-protocol';\n\nexport const AuthServiceSymbol = Symbol('AuthService');\n\n\n@Component(AuthServiceSymbol)\nexport class AuthService {\n  @Autowired(PasswordEncoder)\n  protected readonly passwordEncoder: PasswordEncoder\n\n  @Transactional()\n  async registerUser(param: DouMiBlog.RegisterParam) {\n    const repo = OrmContext.getRepository(User);\n\n    const users = await repo.find();\n\n    if (users.length >= 1) {\n      throw new Error('');\n    }\n\n    const pwd = await this.passwordEncoder.encode(param.password);\n\n    await repo.save({ ...param, password: pwd });\n  }\n}\n","import { Reader } from './../entity/reader';\nimport { Component, Autowired } from '@malagu/core';\nimport { Context } from '@malagu/web/lib/node';\nimport { AwesomeHelp } from 'awesome-js';\nimport { In } from 'typeorm';\nimport { Transactional, OrmContext } from '@malagu/typeorm/lib/node';\nimport { Article, ArticleStatus } from '../entity/article';\nimport { Tag } from '../entity/tag';\nimport { Category } from '../entity/category';\nimport { Archive } from '../entity/archive';\nimport { User } from '../entity/user';\nimport { DouMiBlog } from '../../common/blog-protocol';\nimport { WebsiteServiceSymbol, WebsiteService } from './website.service';\n\n\nexport const BlogServiceSymbol = Symbol('BlogService');\n\nconst PAGE_SIZE = 5;\n\n@Component(BlogServiceSymbol)\nexport class BlogService {\n\n  @Autowired(WebsiteServiceSymbol)\n  protected readonly websiteService: WebsiteService;\n\n  @Transactional()\n  async fetchArticleList(currentPage = 1, pageSize = 5, order?: any, condition?: DouMiBlog.queryCondition) {\n    const repo = OrmContext.getRepository(Article);\n\n    const baseQuery = {\n      order: order ? order : {\n        createdAt: 'DESC'\n      },\n      take: pageSize? pageSize : PAGE_SIZE,\n      skip: (currentPage - 1) * (pageSize ? pageSize : PAGE_SIZE), // think this needs to be page * limit\n      relations: ['tags', 'archiveTime', 'category', 'author']\n    }\n\n    let whereQuery = {}\n    let list: Article[] = []\n    let count = 0;\n\n    if (currentPage === 1) {\n      await this.websiteService.updateWebsiteStatistics()\n    }\n\n    if (condition) {\n      if (condition.queryTag) {\n        // find\n        let orderField = 'article.createdAt';\n        let orderDef: \"ASC\" | \"DESC\" = 'DESC';\n        if (order) {\n          // 1\n          Object.keys(order).forEach(item => {\n            orderField = `article.${item}`\n            orderDef = order[item]\n          })\n        }\n        [list, count] = await repo.createQueryBuilder('article')\n        .innerJoin('article.tags', 'tag', 'tag.id IN (:...tagId)', { tagId: condition.queryTag })\n        .skip((currentPage - 1) * (pageSize ? pageSize : PAGE_SIZE))\n        .take(pageSize? pageSize : PAGE_SIZE)\n        .orderBy(orderField, orderDef)\n        .innerJoinAndSelect('article.tags', 'tags')\n        .innerJoinAndSelect('article.category', 'category')\n        .innerJoinAndSelect('article.archiveTime', 'archiveTime')\n        .innerJoinAndSelect('article.author', 'author')\n        .getManyAndCount()\n      } else if (condition.queryCat) {\n        whereQuery = {\n          where: { category: condition.queryCat }\n        }\n      } else if (condition.queryArch) {\n        whereQuery = {\n          where: { archiveTime: condition.queryArch }\n        }\n      }\n    }\n\n    if (!condition?.queryTag) {\n      [list, count] = await repo.findAndCount({...baseQuery, ...whereQuery})\n    }\n\n    return { list: list.map(item => ({\n      ...item,\n      tags: item.tags.map(it => it.name),\n      category: item.category.name,\n      archiveTime: item.fullArchiveTime,\n      author: item.author.username\n    })), pageCount: Math.ceil(count / (pageSize ? pageSize : PAGE_SIZE)), currentPage}\n  }\n\n  @Transactional()\n  async fetchArticleDetail(slug: string, shouldBeUpdateStats = false) {\n    const repo = OrmContext.getRepository(Article);\n\n    const result = await repo.findOne({ slug }, { relations: ['tags', 'archiveTime', 'category', 'author'] })\n\n    if (!result) {\n      throw new Error('')\n    }\n\n    if (shouldBeUpdateStats) {\n      await this.updateArticleStatictics(slug);\n    }\n\n    // pv1\n    result.pv = +result.pv + 1;\n\n    await repo.save(result);\n\n    return {\n      ...result,\n      tags: result.tags.map(it => it.name),\n      category: result.category.name,\n      archiveTime: result.fullArchiveTime,\n      author: result.author.username\n    }\n  }\n\n  @Transactional()\n  async createOrUpdateArticle(article: DouMiBlog.ArticleDetail, username: string, isUpdate = false) {\n    const { tags, category, archiveTime } = article;\n\n    const tagRepo = OrmContext.getRepository(Tag);\n    const catRepo = OrmContext.getRepository(Category);\n    const archiveRepo = OrmContext.getRepository(Archive);\n    const userRepo = OrmContext.getRepository(User);\n\n    const loadTags = await tagRepo.find({ name: In(tags)})\n    const loadCat = await catRepo.find({ name: category});\n    const loadUser = await userRepo.find({ email: username });\n    let loadArch = await archiveRepo.findOne({ archiveTime: archiveTime.substr(0, 7) })\n    const repo = OrmContext.getRepository(Article);\n\n    if (!loadArch) {\n      loadArch = new Archive()\n      loadArch.archiveTime = archiveTime.substr(0, 7)\n\n      await archiveRepo.save(loadArch);\n    }\n\n    let articleIns\n    if (!isUpdate) {\n      articleIns = new Article()\n    } else {\n      articleIns = await repo.findOne({slug: article.slug});\n\n      if (!articleIns) {\n        throw new Error('');\n      }\n    }\n    articleIns.archiveTime = loadArch;\n    articleIns.fullArchiveTime = archiveTime;\n    articleIns.tags = loadTags;\n    articleIns.category = loadCat[0];\n    articleIns.articleStatus = article.articleStatus as ArticleStatus;\n    articleIns.content = article.content;\n    articleIns.digest = article.digest;\n    articleIns.illustration = article.illustration;\n    articleIns.title = article.title;\n    articleIns.author = loadUser[0];\n\n    if (!isUpdate) {\n      articleIns.slug = Date.now().toString();\n      articleIns.pv = 0;\n    } else {\n      articleIns.slug = article.slug;\n    }\n\n    const result = await repo.save(articleIns)\n\n    // update!https://github.com/typeorm/typeorm/issues/4197\n    // if (!isUpdate) {\n      // result = await repo.save(articleIns)\n    // } else {\n    //   result = await repo.update({ slug: article.slug }, articleIns)\n    // }\n    return result\n  }\n  @Transactional()\n  async updateArticleStatictics(slug: string) {\n    let reqIp: string\n    if (Context.getRequest().headers['x-real-ip']) {\n      reqIp = Context.getRequest().headers['x-real-ip'] as string\n    } else {\n      reqIp = (Context.getRequest() as any).ip\n    }\n\n    const now = AwesomeHelp.convertDate(new Date(), 'YYYY-MM-DD');\n\n    const readerRepo = OrmContext.getRepository(Reader)\n\n    const reader = await readerRepo.findOne({\n      where: { date: now, articleSlug: slug }\n    })\n\n    if (reader) {\n      if (!reader.ips.includes(reqIp)) {\n        reader.ips.push(reqIp)\n        readerRepo.save(reader)\n      }\n    } else {\n      const newReader = new Reader()\n      newReader.articleSlug = slug;\n      newReader.date = now;\n      newReader.ips = [reqIp];\n      readerRepo.save(newReader);\n    }\n\n    await this.websiteService.updateWebsiteStatistics();\n  }\n\n  @Transactional()\n  async fetchTagsListWithArticle() {\n    const repo = OrmContext.getRepository(Tag);\n\n    const result = await repo.find({ relations: [\"articles\"]});\n\n    return result.map(item => ({\n      id: item.id,\n      name: item.name,\n      articlesCount: item.articles.length\n    }))\n  }\n\n  @Transactional()\n  async fetchArchListWithArticle() {\n    const repo = OrmContext.getRepository(Archive);\n\n    const result = await repo.find({ relations: [\"articles\"]});\n\n    return result.map(item => ({\n      id: item.id,\n      archiveTime: item.archiveTime,\n      name: '', // fix lint error\n      articlesCount: item.articles.length\n    }))\n  }\n\n  @Transactional()\n  async fetchCatListWithArticle() {\n    const repo = OrmContext.getRepository(Category);\n\n    const result = await repo.find({ relations: [\"articles\"]});\n\n    return result.map(item => ({\n      id: item.id,\n      name: item.name,\n      articlesCount: item.articles.length\n    }))\n  }\n\n  @Transactional()\n  async searchArticleByKeyword(keyword: string) {\n    const repo = OrmContext.getRepository(Article);\n\n    const result = await repo.createQueryBuilder('article')\n    .where('user.title = :title', { title: keyword})\n    .orWhere('user.content = :content', { content: keyword})\n    .getMany()\n\n    return result\n  }\n}\n","export * from './auth.service';\nexport * from './blog.service';\nexport * from './website.service';\n","import { Context } from '@malagu/web/lib/node';\nimport { Website } from './../entity/website';\nimport { Transactional, OrmContext } from '@malagu/typeorm/lib/node';\nimport { Component } from '@malagu/core';\n\nexport const WebsiteServiceSymbol = Symbol('WebsiteService');\n\n@Component(WebsiteServiceSymbol)\nexport class WebsiteService {\n  @Transactional()\n  async updateWebsiteStatistics() {\n    let reqIp: string\n    if (Context.getRequest().headers['x-real-ip']) {\n      reqIp = Context.getRequest().headers['x-real-ip'] as string\n    } else {\n      reqIp = (Context.getRequest() as any).ip\n    }\n\n    if (!reqIp) {\n      console.log('[blogService]: can not get client ip, ignore it!')\n      return\n    }\n\n    // const now = AwesomeHelp.convertDate(new Date(), 'YYYY-MM-DD');\n\n    const repo = OrmContext.getRepository(Website)\n\n    const website = await repo.findOne({id: 1})\n\n    if (website) {\n      if (!website.todayIps.includes(reqIp)) {\n        website.todayIps.push(reqIp)\n        website.todayPv = +website.todayPv + 1\n        website.todayUv = +website.todayUv + 1\n        website.totalPv = +website.totalPv + 1\n        website.totalUv = +website.totalUv + 1\n      } else {\n        website.totalPv = +website.totalPv + 1\n        website.todayPv = +website.todayPv + 1\n      }\n      repo.save(website)\n    } else {\n      const newData = new Website()\n      newData.todayIps = [reqIp];\n      newData.todayPv = 1\n      newData.todayUv = 1;\n      newData.totalPv = 1\n      newData.totalUv = 1;\n      repo.save(newData)\n    }\n  }\n\n  async websiteChangeLog() {\n    return [{\n      title: '',\n      desc1: '88',\n      desc2: 'web',\n      date: '2016/08',\n      time: '08 '\n    }, {\n      title: '',\n      desc1: '911',\n      desc2: '',\n      date: '2016/09',\n      time: '11 '\n    }, {\n      title: 'SEO',\n      desc1: '1010SEO',\n      desc2: 'titledescriptionmetaSEOgoogleverification',\n      date: '2016/10',\n      time: '10 '\n    }, {\n      title: '',\n      desc1: '1203',\n      desc2: ',',\n      date: '2016/12',\n      time: '03 '\n    }, {\n      title: '',\n      desc1: '0105',\n      desc2: '',\n      date: '2017/01',\n      time: '05 '\n    }, {\n      title: '',\n      desc1: '0209',\n      desc2: 'bug',\n      date: '2017/02',\n      time: '09 '\n    }, {\n      title: 'Markdown',\n      desc1: '0329bug',\n      desc2: '<a href=\"https://www.npmjs.com/package/marked\">marked</a>npm<a href=\"https://www.npmjs.com/package/marked-katex\">marked-katex</a>',\n      date: '2017/03',\n      time: '29 '\n    }, {\n      title: 'https',\n      desc1: '0512https,0513[](https://blog.5udou.cn/aboutDouMi)',\n      desc2: '0513[](https://blog.5udou.cn/resume/mizha)',\n      date: '2018/05',\n      time: '13 '\n    }, {\n      title: 'controllerapi',\n      desc1: '0104controllerapi',\n      desc2: '01058apiRN',\n      date: '2019/01',\n      time: '04 '\n    }, {\n      title: 'gitalk',\n      desc1: '1121disqusgitalk~',\n      desc2: '1121SEO',\n      date: '2019/11',\n      time: '21 '\n    }, {\n      title: '',\n      desc1: 'malagu',\n      desc2: 'UI',\n      date: '2020/02',\n      time: '09 '\n    }]\n  }\n}\n","import { Component, Value } from '@malagu/core';\nimport { UserStore, User, UsernameNotFoundError, ElPolicy, PolicyType, AuthorizeType } from '@malagu/security/lib/node';\nimport { Transactional, OrmContext } from '@malagu/typeorm/lib/node';\nimport { User as UserModel } from './entity/user';\n\n@Component({ id: UserStore, rebind: true })\nexport class UserStoreImpl implements UserStore {\n\n    @Value('malagu.security')\n    protected readonly options: any;\n\n    @Transactional()\n    async load(username: string): Promise<User> {\n      const repo = OrmContext.getRepository(UserModel)\n\n      const user = await repo.findOne({ email: username })\n\n      if (!user) {\n        throw new UsernameNotFoundError(`${username}`);\n      }\n      return {\n        username,\n        password: user.password,\n        accountNonExpired: true,\n        accountNonLocked: true,\n        credentialsNonExpired: true,\n        enabled: true,\n        policies: [ <ElPolicy>{\n            type: PolicyType.El,\n            authorizeType: AuthorizeType.Pre,\n            el: 'true'\n        } ]\n      };\n    }\n}\n","module.exports = require(\"awesome-js\");","module.exports = require(\"class-transformer\");","module.exports = require(\"class-validator\");","module.exports = require(\"cookies\");","module.exports = require(\"cors\");","module.exports = require(\"crc\");","module.exports = require(\"cron\");","module.exports = require(\"crypto-js\");","module.exports = require(\"express-http-context\");","module.exports = require(\"inversify\");","module.exports = require(\"inversify-binding-decorators\");","module.exports = require(\"jexl\");","module.exports = require(\"lodash.pick\");","module.exports = require(\"loglevel\");","module.exports = require(\"reflect-metadata\");","module.exports = require(\"source-map-support\");","module.exports = require(\"ts-custom-error\");","module.exports = require(\"typeorm\");","module.exports = require(\"url-join\");","module.exports = require(\"url-pattern\");","module.exports = require(\"util\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"vscode-jsonrpc\");","module.exports = require(\"vscode-jsonrpc/lib/events\");"],"sourceRoot":""}